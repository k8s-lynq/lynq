import{_ as t,C as l,c as i,o as d,a3 as e,G as p,j as s,a as n}from"./chunks/framework.ZsQ6jjYb.js";const B=JSON.parse('{"title":"Dependency Management Guide","description":"","frontmatter":{},"headers":[],"relativePath":"dependencies.md","filePath":"dependencies.md","lastUpdated":1767596577000}'),y={name:"dependencies.md"};function u(E,a,b,m,F,h){const o=l("DependencyAnimationCycle"),r=l("DependencyAnimationWaitForReady"),c=l("DependencyAnimationParallel");return d(),i("div",null,[a[0]||(a[0]=e("",31)),p(o),a[1]||(a[1]=e("",5)),a[2]||(a[2]=s("div",null,[s("div",{class:"language-yaml line-numbers-mode"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"yaml"),s("pre",{class:"shiki github-dark vp-code",tabindex:"0","v-pre":""},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"# ❌ BEFORE: Circular dependency")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"deployments"),s("span",{style:{color:"#E1E4E8"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  - "),s("span",{style:{color:"#85E89D"}},"id"),s("span",{style:{color:"#E1E4E8"}},": "),s("span",{style:{color:"#9ECBFF"}},"db")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"    dependIds"),s("span",{style:{color:"#E1E4E8"}},": ["),s("span",{style:{color:"#9ECBFF"}},'"app-config"'),s("span",{style:{color:"#E1E4E8"}},"]  "),s("span",{style:{color:"#6A737D"}},"# DB needs app config for connection pooling")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"    spec"),s("span",{style:{color:"#E1E4E8"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"      containers"),s("span",{style:{color:"#E1E4E8"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        - "),s("span",{style:{color:"#85E89D"}},"name"),s("span",{style:{color:"#E1E4E8"}},": "),s("span",{style:{color:"#9ECBFF"}},"postgres")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"          env"),s("span",{style:{color:"#E1E4E8"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"            - "),s("span",{style:{color:"#85E89D"}},"name"),s("span",{style:{color:"#E1E4E8"}},": "),s("span",{style:{color:"#9ECBFF"}},"MAX_CONNECTIONS")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"              valueFrom"),s("span",{style:{color:"#E1E4E8"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"                configMapKeyRef"),s("span",{style:{color:"#E1E4E8"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"                  name"),s("span",{style:{color:"#E1E4E8"}},": "),s("span",{style:{color:"#9ECBFF"}},'"{{ .uid }}-app-config"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"                  key"),s("span",{style:{color:"#E1E4E8"}},": "),s("span",{style:{color:"#9ECBFF"}},"max_connections")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"configMaps"),s("span",{style:{color:"#E1E4E8"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  - "),s("span",{style:{color:"#85E89D"}},"id"),s("span",{style:{color:"#E1E4E8"}},": "),s("span",{style:{color:"#9ECBFF"}},"app-config")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"    dependIds"),s("span",{style:{color:"#E1E4E8"}},": ["),s("span",{style:{color:"#9ECBFF"}},'"db"'),s("span",{style:{color:"#E1E4E8"}},"]  "),s("span",{style:{color:"#6A737D"}},"# Config needs DB host info (circular!)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"    spec"),s("span",{style:{color:"#E1E4E8"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"      data"),s("span",{style:{color:"#E1E4E8"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"        database_host"),s("span",{style:{color:"#E1E4E8"}},": "),s("span",{style:{color:"#9ECBFF"}},'"{{ .uid }}-db-svc"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"        max_connections"),s("span",{style:{color:"#E1E4E8"}},": "),s("span",{style:{color:"#9ECBFF"}},'"100"')])])]),s("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br"),s("span",{class:"line-number"},"19"),s("br"),s("span",{class:"line-number"},"20"),s("br"),s("span",{class:"line-number"},"21"),s("br")])]),s("p",null,[s("strong",null,"Error message:")]),s("div",{class:"language-bash line-numbers-mode"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki github-dark vp-code",tabindex:"0","v-pre":""},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"$"),s("span",{style:{color:"#9ECBFF"}}," kubectl"),s("span",{style:{color:"#9ECBFF"}}," describe"),s("span",{style:{color:"#9ECBFF"}}," lynqnode"),s("span",{style:{color:"#9ECBFF"}}," acme-customer-web-app")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"Events:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"  Type"),s("span",{style:{color:"#9ECBFF"}},"     Reason"),s("span",{style:{color:"#9ECBFF"}},"           Age"),s("span",{style:{color:"#9ECBFF"}},"   Message")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"  ----"),s("span",{style:{color:"#79B8FF"}},"     ------"),s("span",{style:{color:"#79B8FF"}},"           ----"),s("span",{style:{color:"#79B8FF"}},"  -------")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"  Warning"),s("span",{style:{color:"#9ECBFF"}},"  DependencyError"),s("span",{style:{color:"#9ECBFF"}},"  5s"),s("span",{style:{color:"#9ECBFF"}},"    Dependency"),s("span",{style:{color:"#9ECBFF"}}," cycle"),s("span",{style:{color:"#9ECBFF"}}," detected:"),s("span",{style:{color:"#9ECBFF"}}," db"),s("span",{style:{color:"#E1E4E8"}}," -"),s("span",{style:{color:"#F97583"}},">"),s("span",{style:{color:"#9ECBFF"}}," app-config"),s("span",{style:{color:"#E1E4E8"}}," -"),s("span",{style:{color:"#F97583"}},">"),s("span",{style:{color:"#9ECBFF"}}," db")])])]),s("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br")])]),s("p",null,[s("strong",null,"Solution:"),n(" Break the cycle by removing unnecessary dependency")]),s("div",{class:"language-yaml line-numbers-mode"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"yaml"),s("pre",{class:"shiki github-dark vp-code",tabindex:"0","v-pre":""},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"# ✅ AFTER: Acyclic graph")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"configMaps"),s("span",{style:{color:"#E1E4E8"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  - "),s("span",{style:{color:"#85E89D"}},"id"),s("span",{style:{color:"#E1E4E8"}},": "),s("span",{style:{color:"#9ECBFF"}},"app-config")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},`    # Removed: dependIds: ["db"]  ← Config doesn't actually need DB to exist first!`)]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"    spec"),s("span",{style:{color:"#E1E4E8"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"      data"),s("span",{style:{color:"#E1E4E8"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"        database_host"),s("span",{style:{color:"#E1E4E8"}},": "),s("span",{style:{color:"#9ECBFF"}},'"{{ .uid }}-db-svc"'),s("span",{style:{color:"#6A737D"}},"  # This is just a name, not requiring DB to exist")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"        max_connections"),s("span",{style:{color:"#E1E4E8"}},": "),s("span",{style:{color:"#9ECBFF"}},'"100"')]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"deployments"),s("span",{style:{color:"#E1E4E8"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  - "),s("span",{style:{color:"#85E89D"}},"id"),s("span",{style:{color:"#E1E4E8"}},": "),s("span",{style:{color:"#9ECBFF"}},"db")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"    dependIds"),s("span",{style:{color:"#E1E4E8"}},": ["),s("span",{style:{color:"#9ECBFF"}},'"app-config"'),s("span",{style:{color:"#E1E4E8"}},"]  "),s("span",{style:{color:"#6A737D"}},"# DB still waits for config")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"    spec"),s("span",{style:{color:"#E1E4E8"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"      containers"),s("span",{style:{color:"#E1E4E8"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        - "),s("span",{style:{color:"#85E89D"}},"name"),s("span",{style:{color:"#E1E4E8"}},": "),s("span",{style:{color:"#9ECBFF"}},"postgres")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"          env"),s("span",{style:{color:"#E1E4E8"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"            - "),s("span",{style:{color:"#85E89D"}},"name"),s("span",{style:{color:"#E1E4E8"}},": "),s("span",{style:{color:"#9ECBFF"}},"MAX_CONNECTIONS")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"              valueFrom"),s("span",{style:{color:"#E1E4E8"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"                configMapKeyRef"),s("span",{style:{color:"#E1E4E8"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"                  name"),s("span",{style:{color:"#E1E4E8"}},": "),s("span",{style:{color:"#9ECBFF"}},'"{{ .uid }}-app-config"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#85E89D"}},"                  key"),s("span",{style:{color:"#E1E4E8"}},": "),s("span",{style:{color:"#9ECBFF"}},"max_connections")])])]),s("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br"),s("span",{class:"line-number"},"19"),s("br"),s("span",{class:"line-number"},"20"),s("br"),s("span",{class:"line-number"},"21"),s("br")])]),s("p",null,[s("strong",null,"Why this works:"),n(" The ConfigMap contains the DB service name as a string ("),s("code",null,"{{ .uid }}-db-svc"),n("), which doesn't require the DB to actually exist. The name is predictable from the template.")])],-1)),a[3]||(a[3]=e("",63)),p(r),a[4]||(a[4]=e("",11)),p(c),a[5]||(a[5]=e("",17))])}const C=t(y,[["render",u]]);export{B as __pageData,C as default};
