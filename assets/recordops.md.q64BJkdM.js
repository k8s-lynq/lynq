import{_ as a,c as e,o as n,a3 as r}from"./chunks/framework.DddEBHwx.js";const y=JSON.parse('{"title":"RecordOps: Infrastructure That Follows Your Data","description":"","frontmatter":{},"headers":[],"relativePath":"recordops.md","filePath":"recordops.md","lastUpdated":1765186472000}'),o={name:"recordops.md"};function l(t,s,p,i,c,u){return n(),e("div",null,[...s[0]||(s[0]=[r(`<h1 id="recordops-infrastructure-that-follows-your-data" tabindex="-1">RecordOps: Infrastructure That Follows Your Data <a class="header-anchor" href="#recordops-infrastructure-that-follows-your-data" aria-label="Permalink to &quot;RecordOps: Infrastructure That Follows Your Data&quot;">​</a></h1><p>If you&#39;ve ever built a multi-tenant SaaS platform, you&#39;ve probably felt this pain: your customer data lives in your database, but their infrastructure is managed somewhere else—YAML files in Git, Terraform state, manual kubectl commands. Every time you onboard a new customer, you&#39;re coordinating between multiple systems that don&#39;t naturally talk to each other.</p><p>RecordOps is a different approach. Your database records become the source of truth for infrastructure. When you insert a row, infrastructure provisions. When you update a field, resources reconfigure. When you delete a record, everything cleans up. It&#39;s infrastructure management that&#39;s as simple as managing data.</p><nav class="table-of-contents"><ul><li><a href="#what-is-recordops">What is RecordOps?</a></li><li><a href="#the-problem-this-solves">The Problem This Solves</a></li><li><a href="#why-this-resonates">Why This Resonates</a><ul><li><a href="#your-database-already-has-the-answers">Your Database Already Has the Answers</a></li><li><a href="#operations-are-just-data-changes">Operations Are Just Data Changes</a></li><li><a href="#testing-becomes-natural">Testing Becomes Natural</a></li></ul></li><li><a href="#how-it-compares-to-other-approaches">How It Compares to Other Approaches</a><ul><li><a href="#vs-gitops">vs GitOps</a></li><li><a href="#vs-traditional-iac">vs Traditional IaC</a></li></ul></li><li><a href="#recordops-with-lynq">RecordOps with Lynq</a><ul><li><a href="#a-concrete-example">A Concrete Example</a></li></ul></li><li><a href="#common-patterns">Common Patterns</a><ul><li><a href="#feature-flags-control-infrastructure">Feature Flags Control Infrastructure</a></li><li><a href="#blue-green-deployments-as-a-column">Blue-Green Deployments as a Column</a></li><li><a href="#ephemeral-environments-with-ttl">Ephemeral Environments with TTL</a></li></ul></li><li><a href="#practical-benefits">Practical Benefits</a><ul><li><a href="#for-development">For Development</a></li><li><a href="#for-operations">For Operations</a></li><li><a href="#for-the-business">For the Business</a></li></ul></li><li><a href="#when-recordops-makes-sense">When RecordOps Makes Sense</a></li><li><a href="#things-to-consider">Things to Consider</a><ul><li><a href="#your-database-becomes-more-critical">Your Database Becomes More Critical</a></li><li><a href="#security-model-changes">Security Model Changes</a></li><li><a href="#you-need-to-think-about-sync-delays">You Need to Think About Sync Delays</a></li></ul></li><li><a href="#getting-started">Getting Started</a></li><li><a href="#closing-thoughts">Closing Thoughts</a></li><li><a href="#learn-more">Learn More</a></li></ul></nav><h2 id="what-is-recordops" tabindex="-1">What is RecordOps? <a class="header-anchor" href="#what-is-recordops" aria-label="Permalink to &quot;What is RecordOps?&quot;">​</a></h2><p>RecordOps (Record Operations) is an operational pattern where database records define infrastructure state. Instead of maintaining YAML files or writing Terraform code, you define infrastructure parameters as columns in your database tables.</p><p>The pattern is straightforward:</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>INSERT a row     →  Infrastructure provisions</span></span>
<span class="line"><span>UPDATE a column  →  Resources reconfigure</span></span>
<span class="line"><span>DELETE a record  →  Everything cleans up</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Every active database row represents a running stack in your cluster. That&#39;s it.</p><h2 id="the-problem-this-solves" tabindex="-1">The Problem This Solves <a class="header-anchor" href="#the-problem-this-solves" aria-label="Permalink to &quot;The Problem This Solves&quot;">​</a></h2><p>Let me show you a typical customer onboarding flow:</p><p><strong>Traditional approach:</strong></p><ol><li>Customer signs up, gets inserted into your <code>customers</code> table</li><li>You write YAML manifests for their namespace, deployment, service, ingress</li><li>Commit to Git and wait for approval</li><li>CI/CD pipeline runs (if it doesn&#39;t fail)</li><li>Monitor until everything is up</li><li>Update the customer record with their endpoint URL</li></ol><p>This works, but it feels disconnected. Your application already knows about the customer (it&#39;s in your database), but now you need to manually coordinate with your infrastructure system.</p><p><strong>RecordOps approach:</strong></p><ol><li>Customer signs up</li><li><code>INSERT INTO customers (id, domain, plan, active) VALUES (...)</code></li><li>Infrastructure provisions automatically within 30 seconds</li></ol><p>The database transaction is all you need. Your application&#39;s data model and your infrastructure model are the same thing.</p><h2 id="why-this-resonates" tabindex="-1">Why This Resonates <a class="header-anchor" href="#why-this-resonates" aria-label="Permalink to &quot;Why This Resonates&quot;">​</a></h2><h3 id="your-database-already-has-the-answers" tabindex="-1">Your Database Already Has the Answers <a class="header-anchor" href="#your-database-already-has-the-answers" aria-label="Permalink to &quot;Your Database Already Has the Answers&quot;">​</a></h3><p>Think about it: your database already contains all the information needed to provision infrastructure. Customer ID, domain, plan, region, feature flags—it&#39;s all there. You&#39;re just duplicating this information in YAML files or Terraform variables.</p><p>What if infrastructure could just read from the same place your application does?</p><h3 id="operations-are-just-data-changes" tabindex="-1">Operations Are Just Data Changes <a class="header-anchor" href="#operations-are-just-data-changes" aria-label="Permalink to &quot;Operations Are Just Data Changes&quot;">​</a></h3><p>When you think about common operational tasks, they&#39;re really just data changes:</p><p><strong>Scaling a customer:</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">UPDATE</span><span style="color:#E1E4E8;"> customers </span><span style="color:#F97583;">SET</span><span style="color:#E1E4E8;"> replicas </span><span style="color:#F97583;">=</span><span style="color:#79B8FF;"> 10</span><span style="color:#F97583;"> WHERE</span><span style="color:#E1E4E8;"> id </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;acme-corp&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Enabling a feature:</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">INSERT INTO</span><span style="color:#E1E4E8;"> feature_flags (customer_id, feature, </span><span style="color:#F97583;">enabled</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">VALUES</span><span style="color:#E1E4E8;"> (</span><span style="color:#9ECBFF;">&#39;acme-corp&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;ai-assistant&#39;</span><span style="color:#E1E4E8;">, true);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>Rolling back a deployment:</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">UPDATE</span><span style="color:#E1E4E8;"> deployments </span><span style="color:#F97583;">SET</span><span style="color:#E1E4E8;"> active_version </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;blue&#39;</span><span style="color:#F97583;"> WHERE</span><span style="color:#E1E4E8;"> customer_id </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;acme-corp&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>These are operations you already know how to do. They&#39;re part of your normal workflow. Why should provisioning infrastructure require learning a completely different toolchain?</p><h3 id="testing-becomes-natural" tabindex="-1">Testing Becomes Natural <a class="header-anchor" href="#testing-becomes-natural" aria-label="Permalink to &quot;Testing Becomes Natural&quot;">​</a></h3><p>With traditional infrastructure, cloning an environment is a project. You need to export state, modify variables, coordinate across systems.</p><p>With RecordOps, cloning an environment is just cloning database rows:</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">-- Clone production to staging</span></span>
<span class="line"><span style="color:#F97583;">INSERT INTO</span><span style="color:#E1E4E8;"> customers</span></span>
<span class="line"><span style="color:#F97583;">SELECT</span><span style="color:#F97583;"> *</span><span style="color:#F97583;"> FROM</span><span style="color:#E1E4E8;"> customers </span><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> environment </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;prod&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">UPDATE</span><span style="color:#E1E4E8;"> customers</span></span>
<span class="line"><span style="color:#F97583;">SET</span><span style="color:#E1E4E8;"> environment </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;staging&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    domain </span><span style="color:#F97583;">=</span><span style="color:#79B8FF;"> CONCAT</span><span style="color:#E1E4E8;">(domain, </span><span style="color:#9ECBFF;">&#39;.staging&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> id </span><span style="color:#F97583;">IN</span><span style="color:#E1E4E8;"> (...);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>30 seconds later, you have a perfect copy of production running in staging. Every service, every configuration, every dependency—recreated automatically because the data was copied.</p><h2 id="how-it-compares-to-other-approaches" tabindex="-1">How It Compares to Other Approaches <a class="header-anchor" href="#how-it-compares-to-other-approaches" aria-label="Permalink to &quot;How It Compares to Other Approaches&quot;">​</a></h2><h3 id="vs-gitops" tabindex="-1">vs GitOps <a class="header-anchor" href="#vs-gitops" aria-label="Permalink to &quot;vs GitOps&quot;">​</a></h3><p>GitOps is great for cluster-level infrastructure. Your operators, CRDs, system services—these should absolutely be in Git with proper review processes.</p><p>But for per-customer stacks? Git becomes tedious. You&#39;re creating YAML files for each customer, managing merge conflicts, waiting for CI/CD. Meanwhile, your application already knows about these customers through the database.</p><p>RecordOps and GitOps work well together:</p><ul><li><strong>GitOps</strong>: Cluster-level configuration (changes infrequently, requires review)</li><li><strong>RecordOps</strong>: Customer-level resources (changes frequently, follows your data)</li></ul><h3 id="vs-traditional-iac" tabindex="-1">vs Traditional IaC <a class="header-anchor" href="#vs-traditional-iac" aria-label="Permalink to &quot;vs Traditional IaC&quot;">​</a></h3><p>Terraform and Pulumi are excellent for cloud infrastructure. If you&#39;re provisioning AWS resources or managing your Kubernetes cluster itself, use them.</p><p>But if you&#39;re provisioning the same pattern repeatedly (one stack per customer, one environment per project), you might not need infrastructure-as-code. You might just need infrastructure-as-data.</p><p>Instead of writing code to describe infrastructure, you&#39;re adding rows to describe state. It&#39;s a different mental model that maps naturally to applications built around a database.</p><h2 id="recordops-with-lynq" tabindex="-1">RecordOps with Lynq <a class="header-anchor" href="#recordops-with-lynq" aria-label="Permalink to &quot;RecordOps with Lynq&quot;">​</a></h2><p>Lynq implements this pattern for Kubernetes. Here&#39;s how it works:</p><p><strong>1. LynqHub</strong> - Connects to your database and syncs records periodically (default: every 30 seconds)</p><p><strong>2. LynqForm</strong> - Defines the infrastructure template. What should each record create? A deployment? Services? Ingresses?</p><p><strong>3. LynqNode</strong> - Represents each active record. One LynqNode per row, managing all resources for that customer/tenant/project.</p><h3 id="a-concrete-example" tabindex="-1">A Concrete Example <a class="header-anchor" href="#a-concrete-example" aria-label="Permalink to &quot;A Concrete Example&quot;">​</a></h3><p>Let&#39;s say you have a <code>tenants</code> table:</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#F97583;"> TABLE</span><span style="color:#B392F0;"> tenants</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  tenant_id </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">PRIMARY KEY</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  domain </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">255</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">NOT NULL</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  plan </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">  active </span><span style="color:#F97583;">BOOLEAN</span><span style="color:#F97583;"> DEFAULT</span><span style="color:#E1E4E8;"> TRUE,</span></span>
<span class="line"><span style="color:#E1E4E8;">  replicas </span><span style="color:#F97583;">INT</span><span style="color:#F97583;"> DEFAULT</span><span style="color:#79B8FF;"> 2</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>You point Lynq to this table and define a template that says: &quot;For each active tenant, create a namespace, deployment (with <code>replicas</code> replicas), service, and ingress (pointing to <code>domain</code>).&quot;</p><p>Now when you insert:</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">INSERT INTO</span><span style="color:#E1E4E8;"> tenants </span><span style="color:#F97583;">VALUES</span></span>
<span class="line"><span style="color:#E1E4E8;">  (</span><span style="color:#9ECBFF;">&#39;acme-corp&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;acme.example.com&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;enterprise&#39;</span><span style="color:#E1E4E8;">, true, </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Lynq detects the new row within 30 seconds and provisions:</p><ul><li>Namespace: <code>acme-corp</code></li><li>Deployment: 5 replicas</li><li>Service: <code>acme-corp-app</code></li><li>Ingress: Routes <code>acme.example.com</code> to the service</li></ul><p>All automatically. No manual steps.</p><h2 id="common-patterns" tabindex="-1">Common Patterns <a class="header-anchor" href="#common-patterns" aria-label="Permalink to &quot;Common Patterns&quot;">​</a></h2><h3 id="feature-flags-control-infrastructure" tabindex="-1">Feature Flags Control Infrastructure <a class="header-anchor" href="#feature-flags-control-infrastructure" aria-label="Permalink to &quot;Feature Flags Control Infrastructure&quot;">​</a></h3><p>Instead of deploying optional features for everyone, make them data-driven:</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#F97583;"> TABLE</span><span style="color:#B392F0;"> feature_flags</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  tenant_id </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">  feature </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#F97583;">  enabled</span><span style="color:#F97583;"> BOOLEAN</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- Enable AI assistant for specific customer</span></span>
<span class="line"><span style="color:#F97583;">INSERT INTO</span><span style="color:#E1E4E8;"> feature_flags </span><span style="color:#F97583;">VALUES</span><span style="color:#E1E4E8;"> (</span><span style="color:#9ECBFF;">&#39;acme-corp&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;ai-assistant&#39;</span><span style="color:#E1E4E8;">, true);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Your LynqForm template includes conditional logic: if the feature flag exists and is enabled, deploy the AI service. If disabled or absent, skip it.</p><p>Suddenly your infrastructure adapts to your feature flags automatically.</p><h3 id="blue-green-deployments-as-a-column" tabindex="-1">Blue-Green Deployments as a Column <a class="header-anchor" href="#blue-green-deployments-as-a-column" aria-label="Permalink to &quot;Blue-Green Deployments as a Column&quot;">​</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#F97583;"> TABLE</span><span style="color:#B392F0;"> deployments</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  tenant_id </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">  active_version </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">-- &#39;blue&#39; or &#39;green&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- Switch traffic</span></span>
<span class="line"><span style="color:#F97583;">UPDATE</span><span style="color:#E1E4E8;"> deployments </span><span style="color:#F97583;">SET</span><span style="color:#E1E4E8;"> active_version </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;green&#39;</span><span style="color:#F97583;"> WHERE</span><span style="color:#E1E4E8;"> tenant_id </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;acme-corp&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Your service selector updates to point to the green deployment. Traffic switches within seconds. Roll back by changing the column back to &#39;blue&#39;.</p><h3 id="ephemeral-environments-with-ttl" tabindex="-1">Ephemeral Environments with TTL <a class="header-anchor" href="#ephemeral-environments-with-ttl" aria-label="Permalink to &quot;Ephemeral Environments with TTL&quot;">​</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">-- Create temporary environment</span></span>
<span class="line"><span style="color:#F97583;">INSERT INTO</span><span style="color:#E1E4E8;"> environments (id, domain, ttl)</span></span>
<span class="line"><span style="color:#F97583;">VALUES</span><span style="color:#E1E4E8;"> (</span><span style="color:#9ECBFF;">&#39;demo-acme&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;demo-acme.example.com&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">NOW</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> INTERVAL </span><span style="color:#79B8FF;">7</span><span style="color:#F97583;"> DAY</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- Add a database trigger to clean up expired environments</span></span>
<span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#F97583;"> TRIGGER</span><span style="color:#B392F0;"> cleanup_expired</span></span>
<span class="line"><span style="color:#F97583;">AFTER</span><span style="color:#F97583;"> INSERT</span><span style="color:#F97583;"> OR</span><span style="color:#F97583;"> UPDATE</span><span style="color:#F97583;"> ON</span><span style="color:#E1E4E8;"> environments</span></span>
<span class="line"><span style="color:#F97583;">BEGIN</span></span>
<span class="line"><span style="color:#F97583;">  DELETE</span><span style="color:#F97583;"> FROM</span><span style="color:#E1E4E8;"> environments </span><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> ttl </span><span style="color:#F97583;">&lt;</span><span style="color:#F97583;"> NOW</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#F97583;">END</span><span style="color:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Environments provision on insert and automatically clean up after their TTL. Perfect for demo environments or PR previews.</p><h2 id="practical-benefits" tabindex="-1">Practical Benefits <a class="header-anchor" href="#practical-benefits" aria-label="Permalink to &quot;Practical Benefits&quot;">​</a></h2><h3 id="for-development" tabindex="-1">For Development <a class="header-anchor" href="#for-development" aria-label="Permalink to &quot;For Development&quot;">​</a></h3><p>Before, adding a customer meant coordinating across multiple systems. Now it&#39;s just a database operation. The same skills you use every day—writing queries, managing transactions—work for infrastructure too.</p><p>You can test changes by inserting test records. No need to learn Terraform or maintain separate YAML files.</p><h3 id="for-operations" tabindex="-1">For Operations <a class="header-anchor" href="#for-operations" aria-label="Permalink to &quot;For Operations&quot;">​</a></h3><p>Your infrastructure state is in the same place as your application state. Audit logs are database logs. Backups include infrastructure configuration. There&#39;s no need to reconcile state files or worry about drift—Lynq continuously syncs your database to the cluster.</p><p>Rollbacks are straightforward: restore your database, and infrastructure recreates automatically.</p><h3 id="for-the-business" tabindex="-1">For the Business <a class="header-anchor" href="#for-the-business" aria-label="Permalink to &quot;For the Business&quot;">​</a></h3><p>Customer onboarding is faster because there&#39;s less coordination. Feature rollouts are simpler because they&#39;re just database toggles. The gap between what your application knows and what your infrastructure provides shrinks to almost nothing.</p><h2 id="when-recordops-makes-sense" tabindex="-1">When RecordOps Makes Sense <a class="header-anchor" href="#when-recordops-makes-sense" aria-label="Permalink to &quot;When RecordOps Makes Sense&quot;">​</a></h2><p>This pattern works well when:</p><ul><li>You&#39;re building a multi-tenant platform where each customer/project needs isolated infrastructure</li><li>You provision infrastructure frequently (multiple times per day)</li><li>Your infrastructure follows your data model closely</li><li>You want less coordination between application logic and infrastructure</li></ul><p>It&#39;s probably not the right fit if:</p><ul><li>You rarely provision new infrastructure (once a month or less)</li><li>Your infrastructure requires manual approval for every change</li><li>You need deep integration with cloud provider services beyond Kubernetes</li></ul><p>And honestly, you can mix approaches. Use GitOps for cluster-level config, RecordOps for per-tenant stacks, and manual processes for critical infrastructure changes. They complement each other.</p><h2 id="things-to-consider" tabindex="-1">Things to Consider <a class="header-anchor" href="#things-to-consider" aria-label="Permalink to &quot;Things to Consider&quot;">​</a></h2><h3 id="your-database-becomes-more-critical" tabindex="-1">Your Database Becomes More Critical <a class="header-anchor" href="#your-database-becomes-more-critical" aria-label="Permalink to &quot;Your Database Becomes More Critical&quot;">​</a></h3><p>With RecordOps, your database isn&#39;t just storing application data—it&#39;s controlling infrastructure. This means:</p><ul><li>Database availability matters more. If the database is down, you can&#39;t provision new infrastructure (though existing infrastructure keeps running)</li><li>Schema migrations affect infrastructure. Test them carefully in staging</li><li>Database permissions become infrastructure permissions. Be thoughtful about who can write to these tables</li></ul><h3 id="security-model-changes" tabindex="-1">Security Model Changes <a class="header-anchor" href="#security-model-changes" aria-label="Permalink to &quot;Security Model Changes&quot;">​</a></h3><p>SQL injection vulnerabilities become infrastructure vulnerabilities. If user input can manipulate your queries, they could potentially trigger unwanted infrastructure changes. Validate inputs carefully and use parameterized queries.</p><p>Database credentials need strong protection—they control your cluster.</p><h3 id="you-need-to-think-about-sync-delays" tabindex="-1">You Need to Think About Sync Delays <a class="header-anchor" href="#you-need-to-think-about-sync-delays" aria-label="Permalink to &quot;You Need to Think About Sync Delays&quot;">​</a></h3><p>Lynq syncs your database every 30 seconds by default. That means there&#39;s a small delay between when you insert a row and when infrastructure provisions. For most cases, this is fine. But if you need instant provisioning, you&#39;ll need to tune the sync interval or reconsider the approach.</p><h2 id="getting-started" tabindex="-1">Getting Started <a class="header-anchor" href="#getting-started" aria-label="Permalink to &quot;Getting Started&quot;">​</a></h2><p>If this resonates with you, here&#39;s how to try it:</p><p><strong>1. Identify your infrastructure records</strong></p><p>What database rows should represent infrastructure? Customers? Projects? Deployments? Feature environments?</p><p><strong>2. Add infrastructure columns</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">ALTER</span><span style="color:#F97583;"> TABLE</span><span style="color:#E1E4E8;"> customers</span></span>
<span class="line"><span style="color:#F97583;">  ADD</span><span style="color:#E1E4E8;"> COLUMN replicas </span><span style="color:#F97583;">INT</span><span style="color:#F97583;"> DEFAULT</span><span style="color:#79B8FF;"> 2</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#F97583;">  ADD</span><span style="color:#E1E4E8;"> COLUMN region </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">DEFAULT</span><span style="color:#9ECBFF;"> &#39;us-east-1&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#F97583;">  ADD</span><span style="color:#E1E4E8;"> COLUMN active </span><span style="color:#F97583;">BOOLEAN</span><span style="color:#F97583;"> DEFAULT</span><span style="color:#E1E4E8;"> TRUE;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>3. Install Lynq and point it at your database</strong></p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">operator.lynq.sh/v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">LynqHub</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">  source</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">    type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">mysql</span></span>
<span class="line"><span style="color:#85E89D;">    mysql</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">      host</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">mysql.default.svc</span></span>
<span class="line"><span style="color:#85E89D;">      database</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">myapp</span></span>
<span class="line"><span style="color:#85E89D;">      table</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">customers</span></span>
<span class="line"><span style="color:#85E89D;">    syncInterval</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">30s</span></span>
<span class="line"><span style="color:#85E89D;">  valueMappings</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">    uid</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">customer_id</span></span>
<span class="line"><span style="color:#85E89D;">    activate</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">active</span></span>
<span class="line"><span style="color:#85E89D;">  extraValueMappings</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">    replicas</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">replicas</span></span>
<span class="line"><span style="color:#85E89D;">    plan</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">plan</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>4. Define your template</strong></p><p>What should each customer get? A namespace? Deployment? Services? Define it once, and it applies to every row.</p><p><strong>5. Test with a single record</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">INSERT INTO</span><span style="color:#E1E4E8;"> customers </span><span style="color:#F97583;">VALUES</span><span style="color:#E1E4E8;"> (</span><span style="color:#9ECBFF;">&#39;test&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;test.example.com&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;pro&#39;</span><span style="color:#E1E4E8;">, true, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Watch it provision. If something&#39;s wrong, delete the row and try again. It&#39;s just data.</p><h2 id="closing-thoughts" tabindex="-1">Closing Thoughts <a class="header-anchor" href="#closing-thoughts" aria-label="Permalink to &quot;Closing Thoughts&quot;">​</a></h2><p>RecordOps isn&#39;t revolutionary—it&#39;s actually pretty obvious once you see it. If your infrastructure maps to your data, why not let your data drive your infrastructure?</p><p>This pattern won&#39;t replace every infrastructure tool you use. But for the specific problem of provisioning repeated patterns (per-customer stacks, per-project environments), it might make your life simpler.</p><p>I built Lynq because I kept solving the same problem: syncing my application&#39;s database state with infrastructure state. Eventually I realized they could be the same thing.</p><p>If that sounds familiar, maybe RecordOps is worth exploring.</p><h2 id="learn-more" tabindex="-1">Learn More <a class="header-anchor" href="#learn-more" aria-label="Permalink to &quot;Learn More&quot;">​</a></h2><ul><li><a href="./how-it-works.html">How Lynq Works</a> - Technical architecture</li><li><a href="./quickstart.html">Quick Start</a> - Try it in 5 minutes</li><li><a href="./architecture.html">Architecture</a> - System design</li><li><a href="./advanced-use-cases.html">Use Cases</a> - Real-world patterns</li></ul><hr><p>Questions? Open an issue on <a href="https://github.com/k8s-lynq/lynq/issues" target="_blank" rel="noreferrer">GitHub</a> or start a <a href="https://github.com/k8s-lynq/lynq/discussions" target="_blank" rel="noreferrer">discussion</a>.</p>`,117)])])}const h=a(o,[["render",l]]);export{y as __pageData,h as default};
