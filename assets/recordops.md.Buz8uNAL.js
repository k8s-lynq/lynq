import{_ as a,c as n,o as e,a4 as t}from"./chunks/framework.B23BjOVS.js";const y=JSON.parse('{"title":"RecordOps: Infrastructure as Data","description":"","frontmatter":{},"headers":[],"relativePath":"recordops.md","filePath":"recordops.md","lastUpdated":1765245068000}'),r={name:"recordops.md"};function l(o,s,p,i,c,u){return e(),n("div",null,[...s[0]||(s[0]=[t(`<h1 id="recordops-infrastructure-as-data" tabindex="-1">RecordOps: Infrastructure as Data <a class="header-anchor" href="#recordops-infrastructure-as-data" aria-label="Permalink to &quot;RecordOps: Infrastructure as Data&quot;">‚Äã</a></h1><p>If you&#39;ve ever built a multi-tenant SaaS platform, you&#39;ve probably felt this pain: your customer data lives in your database, but their infrastructure is managed somewhere else (YAML files in Git, Terraform state, manual kubectl commands). Every time you onboard a new customer, you&#39;re coordinating between multiple systems that don&#39;t naturally talk to each other.</p><p><strong>RecordOps</strong> changes this. It&#39;s a new paradigm called <strong>Infrastructure as Data</strong> where database records become the source of truth for infrastructure. When you insert a row, infrastructure provisions. When you update a field, resources reconfigure. When you delete a record, everything cleans up.</p><nav class="table-of-contents"><ul><li><a href="#what-is-infrastructure-as-data">What is Infrastructure as Data?</a></li><li><a href="#what-is-recordops">What is RecordOps?</a></li><li><a href="#lynq-a-recordops-platform">Lynq: A RecordOps Platform</a></li><li><a href="#the-problem-this-solves">The Problem This Solves</a></li><li><a href="#why-infrastructure-as-data">Why Infrastructure as Data?</a><ul><li><a href="#your-database-already-has-the-answers">Your Database Already Has the Answers</a></li><li><a href="#operations-become-data-changes">Operations Become Data Changes</a></li><li><a href="#testing-becomes-natural">Testing Becomes Natural</a></li></ul></li><li><a href="#how-infrastructure-as-data-compares">How Infrastructure as Data Compares</a><ul><li><a href="#infrastructure-as-data-vs-infrastructure-as-code">Infrastructure as Data vs Infrastructure as Code</a></li><li><a href="#infrastructure-as-data-vs-gitops">Infrastructure as Data vs GitOps</a></li></ul></li><li><a href="#recordops-with-lynq-implementation-details">RecordOps with Lynq: Implementation Details</a><ul><li><a href="#a-concrete-example">A Concrete Example</a></li></ul></li><li><a href="#common-patterns-in-infrastructure-as-data">Common Patterns in Infrastructure as Data</a></li><li><a href="#practical-benefits-of-infrastructure-as-data">Practical Benefits of Infrastructure as Data</a><ul><li><a href="#for-development">For Development</a></li><li><a href="#for-operations">For Operations</a></li><li><a href="#for-business">For Business</a></li></ul></li><li><a href="#when-infrastructure-as-data-makes-sense">When Infrastructure as Data Makes Sense</a></li><li><a href="#considerations-for-infrastructure-as-data">Considerations for Infrastructure as Data</a></li><li><a href="#getting-started-with-infrastructure-as-data">Getting Started with Infrastructure as Data</a></li><li><a href="#closing-thoughts">Closing Thoughts</a></li><li><a href="#learn-more">Learn More</a></li></ul></nav><h2 id="what-is-infrastructure-as-data" tabindex="-1">What is Infrastructure as Data? <a class="header-anchor" href="#what-is-infrastructure-as-data" aria-label="Permalink to &quot;What is Infrastructure as Data?&quot;">‚Äã</a></h2><p>You&#39;re familiar with Infrastructure as Code (IaC): using Terraform or Pulumi to define infrastructure through code. Infrastructure as Data (IaD) is different: instead of writing code to describe infrastructure, you write data to describe state.</p><p>The term was coined by Michael DeHaan (creator of Ansible) in 2013:</p><blockquote><p>&quot;Infrastructure is best modeled not as code, nor in a GUI, but as a text-based, middle-ground, data-driven policy.&quot;</p></blockquote><div class="tip custom-block"><p class="custom-block-title">The Paradigm Shift</p><ul><li><strong>Infrastructure as Code</strong>: Write code (HCL, TypeScript) ‚Üí Run apply ‚Üí Infrastructure changes</li><li><strong>Infrastructure as Data</strong>: Write data (YAML, SQL, database rows) ‚Üí Infrastructure follows automatically</li></ul></div><p>Infrastructure as Data is the foundation of tools like Ansible (playbooks), Crossplane (Kubernetes CRs), and RecordOps (database records).</p><p>It makes sense when:</p><ul><li>Your infrastructure maps directly to your data model (one customer = one stack)</li><li>You&#39;re provisioning the same pattern repeatedly</li><li>Your application already knows everything needed to provision infrastructure</li></ul><h2 id="what-is-recordops" tabindex="-1">What is RecordOps? <a class="header-anchor" href="#what-is-recordops" aria-label="Permalink to &quot;What is RecordOps?&quot;">‚Äã</a></h2><p><strong>RecordOps</strong> (Record Operations) is the operational pattern that implements Infrastructure as Data. It treats database records as infrastructure specifications.</p><div class="tip custom-block"><p class="custom-block-title">Core Principle</p><p>RecordOps is how you practice Infrastructure as Data in production. Every database record defines a running stack in your cluster.</p></div><p>The pattern is straightforward:</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>INSERT a row     ‚Üí  Infrastructure provisions</span></span>
<span class="line"><span>UPDATE a column  ‚Üí  Resources reconfigure</span></span>
<span class="line"><span>DELETE a record  ‚Üí  Everything cleans up</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>This is Infrastructure as Data in action. Your database becomes your infrastructure control plane.</p><h2 id="lynq-a-recordops-platform" tabindex="-1">Lynq: A RecordOps Platform <a class="header-anchor" href="#lynq-a-recordops-platform" aria-label="Permalink to &quot;Lynq: A RecordOps Platform&quot;">‚Äã</a></h2><p><strong>Lynq</strong> is an open-source Kubernetes operator that implements the RecordOps pattern. It&#39;s a practical implementation of Infrastructure as Data for cloud-native environments.</p><p>Lynq watches your database and continuously syncs infrastructure state to match your data. It&#39;s infrastructure management that&#39;s as simple as managing database records.</p><h2 id="the-problem-this-solves" tabindex="-1">The Problem This Solves <a class="header-anchor" href="#the-problem-this-solves" aria-label="Permalink to &quot;The Problem This Solves&quot;">‚Äã</a></h2><p>Let me show you a typical customer onboarding flow:</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-RMwyz" id="tab-nk0KpVx" checked><label data-title="Infrastructure as Code (Traditional)" for="tab-nk0KpVx">Infrastructure as Code (Traditional)</label><input type="radio" name="group-RMwyz" id="tab-QnyRklQ"><label data-title="Infrastructure as Data (RecordOps)" for="tab-QnyRklQ">Infrastructure as Data (RecordOps)</label></div><div class="blocks"><div class="language-text active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>1. Customer signs up ‚Üí INSERT into customers table</span></span>
<span class="line"><span>2. Write Terraform/YAML manifests</span></span>
<span class="line"><span>3. Commit to Git and wait for PR approval</span></span>
<span class="line"><span>4. Wait for CI/CD pipeline (hope it doesn&#39;t fail)</span></span>
<span class="line"><span>5. Monitor until everything is up</span></span>
<span class="line"><span>6. Update customer record with endpoint URL</span></span>
<span class="line"><span></span></span>
<span class="line"><span>‚è±Ô∏è  Time: 15-45 minutes</span></span>
<span class="line"><span>üîÑ  Manual steps: 6</span></span>
<span class="line"><span>‚ùå  Context switches: Multiple systems</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>1. Customer signs up</span></span>
<span class="line"><span>2. INSERT INTO customers (id, domain, plan, active) VALUES (...)</span></span>
<span class="line"><span>3. Infrastructure provisions automatically</span></span>
<span class="line"><span></span></span>
<span class="line"><span>‚è±Ô∏è  Time: 30 seconds</span></span>
<span class="line"><span>üîÑ  Manual steps: 1</span></span>
<span class="line"><span>‚úÖ  One system: Your database</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div></div><div class="info custom-block"><p class="custom-block-title">The Key Insight</p><p>With Infrastructure as Data, your application&#39;s data model IS your infrastructure model. No duplication. No coordination. Just data.</p></div><h2 id="why-infrastructure-as-data" tabindex="-1">Why Infrastructure as Data? <a class="header-anchor" href="#why-infrastructure-as-data" aria-label="Permalink to &quot;Why Infrastructure as Data?&quot;">‚Äã</a></h2><h3 id="your-database-already-has-the-answers" tabindex="-1">Your Database Already Has the Answers <a class="header-anchor" href="#your-database-already-has-the-answers" aria-label="Permalink to &quot;Your Database Already Has the Answers&quot;">‚Äã</a></h3><p>Think about what information you need to provision infrastructure:</p><ul><li>Customer ID</li><li>Domain name</li><li>Plan/tier</li><li>Region</li><li>Resource limits</li><li>Feature flags</li></ul><p>All of this is already in your database. Infrastructure as Code duplicates this in YAML files or Terraform variables. Infrastructure as Data just reads it directly.</p><div class="tip custom-block"><p class="custom-block-title">Question Worth Asking</p><p>If your infrastructure maps to your data, why not let your data drive your infrastructure?</p></div><h3 id="operations-become-data-changes" tabindex="-1">Operations Become Data Changes <a class="header-anchor" href="#operations-become-data-changes" aria-label="Permalink to &quot;Operations Become Data Changes&quot;">‚Äã</a></h3><p>With Infrastructure as Data, operational tasks are just database operations:</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-8tXMM" id="tab-JLF6Mnk" checked><label data-title="Scale a Customer" for="tab-JLF6Mnk">Scale a Customer</label><input type="radio" name="group-8tXMM" id="tab-zCZNu4N"><label data-title="Enable a Feature" for="tab-zCZNu4N">Enable a Feature</label><input type="radio" name="group-8tXMM" id="tab-mPmJuqo"><label data-title="Rollback Deployment" for="tab-mPmJuqo">Rollback Deployment</label></div><div class="blocks"><div class="language-sql active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">UPDATE</span><span style="color:#E1E4E8;"> customers</span></span>
<span class="line"><span style="color:#F97583;">SET</span><span style="color:#E1E4E8;"> replicas </span><span style="color:#F97583;">=</span><span style="color:#79B8FF;"> 10</span></span>
<span class="line"><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> id </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;acme-corp&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">INSERT INTO</span><span style="color:#E1E4E8;"> feature_flags (customer_id, feature, </span><span style="color:#F97583;">enabled</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">VALUES</span><span style="color:#E1E4E8;"> (</span><span style="color:#9ECBFF;">&#39;acme-corp&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;ai-assistant&#39;</span><span style="color:#E1E4E8;">, true);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">UPDATE</span><span style="color:#E1E4E8;"> deployments</span></span>
<span class="line"><span style="color:#F97583;">SET</span><span style="color:#E1E4E8;"> active_version </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;blue&#39;</span></span>
<span class="line"><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> customer_id </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;acme-corp&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div></div><p>No new tooling. No context switching. Just SQL, operations you already know.</p><h3 id="testing-becomes-natural" tabindex="-1">Testing Becomes Natural <a class="header-anchor" href="#testing-becomes-natural" aria-label="Permalink to &quot;Testing Becomes Natural&quot;">‚Äã</a></h3><p>Infrastructure as Code cloning: Export state ‚Üí Modify variables ‚Üí Run apply ‚Üí Debug conflicts ‚Üí Maybe it works</p><p>Infrastructure as Data cloning: Clone database rows</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">-- Clone production to staging</span></span>
<span class="line"><span style="color:#F97583;">INSERT INTO</span><span style="color:#E1E4E8;"> customers</span></span>
<span class="line"><span style="color:#F97583;">SELECT</span><span style="color:#F97583;"> *</span><span style="color:#F97583;"> FROM</span><span style="color:#E1E4E8;"> customers </span><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> environment </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;prod&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">UPDATE</span><span style="color:#E1E4E8;"> customers</span></span>
<span class="line"><span style="color:#F97583;">SET</span><span style="color:#E1E4E8;"> environment </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;staging&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    domain </span><span style="color:#F97583;">=</span><span style="color:#79B8FF;"> CONCAT</span><span style="color:#E1E4E8;">(domain, </span><span style="color:#9ECBFF;">&#39;.staging&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> id </span><span style="color:#F97583;">IN</span><span style="color:#E1E4E8;"> (...);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>30 seconds later, perfect staging environment. Every service, every configuration, every dependency recreated automatically because the data was copied.</p></div><h2 id="how-infrastructure-as-data-compares" tabindex="-1">How Infrastructure as Data Compares <a class="header-anchor" href="#how-infrastructure-as-data-compares" aria-label="Permalink to &quot;How Infrastructure as Data Compares&quot;">‚Äã</a></h2><h3 id="infrastructure-as-data-vs-infrastructure-as-code" tabindex="-1">Infrastructure as Data vs Infrastructure as Code <a class="header-anchor" href="#infrastructure-as-data-vs-infrastructure-as-code" aria-label="Permalink to &quot;Infrastructure as Data vs Infrastructure as Code&quot;">‚Äã</a></h3><table tabindex="0"><thead><tr><th>Aspect</th><th>Infrastructure as Code</th><th>Infrastructure as Data</th></tr></thead><tbody><tr><td><strong>Definition</strong></td><td>Code describes infrastructure</td><td>Data describes state</td></tr><tr><td><strong>Language</strong></td><td>HCL, TypeScript, Python</td><td>YAML (Ansible), Kubernetes CR (Crossplane), SQL (RecordOps)</td></tr><tr><td><strong>Execution</strong></td><td>Manual plan/apply</td><td>Automatic sync/reconciliation</td></tr><tr><td><strong>State Storage</strong></td><td>Separate state files</td><td>Declarative specs (playbooks, CRs, database)</td></tr><tr><td><strong>Examples</strong></td><td>Terraform, Pulumi</td><td>Ansible, Crossplane, RecordOps</td></tr><tr><td><strong>Best For</strong></td><td>Cloud resources, cluster setup</td><td>Declarative automation, data-driven apps</td></tr></tbody></table><div class="info custom-block"><p class="custom-block-title">They Complement Each Other</p><ul><li><strong>IaC</strong>: Provision your Kubernetes cluster, cloud resources</li><li><strong>IaD</strong>: Declarative automation (Ansible for config, Crossplane for cloud, RecordOps for tenants)</li></ul></div><h3 id="infrastructure-as-data-vs-gitops" tabindex="-1">Infrastructure as Data vs GitOps <a class="header-anchor" href="#infrastructure-as-data-vs-gitops" aria-label="Permalink to &quot;Infrastructure as Data vs GitOps&quot;">‚Äã</a></h3><p>GitOps is great for cluster-level infrastructure. Your operators, CRDs, system services should absolutely be in Git with proper review processes.</p><p>But for per-customer stacks? Git becomes tedious. You&#39;re creating YAML files for each customer, managing merge conflicts, waiting for CI/CD. Infrastructure as Data makes this simple: one database row per customer.</p><div class="info custom-block"><p class="custom-block-title">They Work Well Together</p><ul><li><strong>GitOps</strong>: Cluster-level configuration (changes infrequently, requires review)</li><li><strong>Infrastructure as Data</strong>: Customer-level resources (changes frequently, follows your data)</li></ul></div><h2 id="recordops-with-lynq-implementation-details" tabindex="-1">RecordOps with Lynq: Implementation Details <a class="header-anchor" href="#recordops-with-lynq-implementation-details" aria-label="Permalink to &quot;RecordOps with Lynq: Implementation Details&quot;">‚Äã</a></h2><p>Lynq implements Infrastructure as Data through three components:</p><p><strong>1. LynqHub</strong> - Database watcher that syncs records every 30 seconds (configurable)</p><p><strong>2. LynqForm</strong> - Infrastructure template. Defines what each database record creates</p><p><strong>3. LynqNode</strong> - One per active record, managing all resources for that customer/tenant/project</p><h3 id="a-concrete-example" tabindex="-1">A Concrete Example <a class="header-anchor" href="#a-concrete-example" aria-label="Permalink to &quot;A Concrete Example&quot;">‚Äã</a></h3><p>Your database schema defines your infrastructure API:</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#F97583;"> TABLE</span><span style="color:#B392F0;"> tenants</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  tenant_id </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">PRIMARY KEY</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  domain </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">255</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">NOT NULL</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  plan </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">  active </span><span style="color:#F97583;">BOOLEAN</span><span style="color:#F97583;"> DEFAULT</span><span style="color:#E1E4E8;"> TRUE,</span></span>
<span class="line"><span style="color:#E1E4E8;">  replicas </span><span style="color:#F97583;">INT</span><span style="color:#F97583;"> DEFAULT</span><span style="color:#79B8FF;"> 2</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>This is Infrastructure as Data. Columns become infrastructure parameters.</p><p>You define a LynqForm template once: &quot;For each active tenant, create namespace, deployment (with <code>replicas</code> replicas), service, and ingress (pointing to <code>domain</code>).&quot;</p><p>Now infrastructure follows your data:</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">INSERT INTO</span><span style="color:#E1E4E8;"> tenants </span><span style="color:#F97583;">VALUES</span></span>
<span class="line"><span style="color:#E1E4E8;">  (</span><span style="color:#9ECBFF;">&#39;acme-corp&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;acme.example.com&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;enterprise&#39;</span><span style="color:#E1E4E8;">, true, </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">What Happens Automatically</p><p>Lynq detects the new row within 30 seconds and provisions:</p><ul><li><strong>Namespace</strong>: <code>acme-corp</code></li><li><strong>Deployment</strong>: 5 replicas</li><li><strong>Service</strong>: <code>acme-corp-app</code></li><li><strong>Ingress</strong>: Routes <code>acme.example.com</code> to the service</li></ul><p>This is Infrastructure as Data in practice. Data defines infrastructure, Lynq provisions it.</p></div><h2 id="common-patterns-in-infrastructure-as-data" tabindex="-1">Common Patterns in Infrastructure as Data <a class="header-anchor" href="#common-patterns-in-infrastructure-as-data" aria-label="Permalink to &quot;Common Patterns in Infrastructure as Data&quot;">‚Äã</a></h2><details class="details custom-block"><summary>Pattern 1: Feature Flags as Infrastructure Parameters</summary><p>Infrastructure as Data makes feature flags literal infrastructure parameters:</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#F97583;"> TABLE</span><span style="color:#B392F0;"> feature_flags</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  tenant_id </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">  feature </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#F97583;">  enabled</span><span style="color:#F97583;"> BOOLEAN</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- Feature flag becomes infrastructure</span></span>
<span class="line"><span style="color:#F97583;">INSERT INTO</span><span style="color:#E1E4E8;"> feature_flags </span><span style="color:#F97583;">VALUES</span><span style="color:#E1E4E8;"> (</span><span style="color:#9ECBFF;">&#39;acme-corp&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;ai-assistant&#39;</span><span style="color:#E1E4E8;">, true);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Your template has conditional logic: if <code>ai-assistant</code> flag is enabled, deploy AI service. Otherwise, skip it. Infrastructure automatically adapts to your data.</p></details><details class="details custom-block"><summary>Pattern 2: Blue-Green Deployments as a Column</summary><p>With Infrastructure as Data, deployment strategy is just a column:</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#F97583;"> TABLE</span><span style="color:#B392F0;"> deployments</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  tenant_id </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">  active_version </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">-- &#39;blue&#39; or &#39;green&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- Change the data, change the infrastructure</span></span>
<span class="line"><span style="color:#F97583;">UPDATE</span><span style="color:#E1E4E8;"> deployments </span><span style="color:#F97583;">SET</span><span style="color:#E1E4E8;"> active_version </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;green&#39;</span><span style="color:#F97583;"> WHERE</span><span style="color:#E1E4E8;"> tenant_id </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;acme-corp&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Service selector updates automatically. Traffic switches in seconds. Roll back by changing the column back to &#39;blue&#39;.</p></details><details class="details custom-block"><summary>Pattern 3: Ephemeral Environments with TTL</summary><p>Infrastructure as Data with lifecycle management:</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#F97583;"> TABLE</span><span style="color:#B392F0;"> environments</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  id </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">  domain </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">255</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">  ttl </span><span style="color:#F97583;">TIMESTAMP</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">INSERT INTO</span><span style="color:#E1E4E8;"> environments </span><span style="color:#F97583;">VALUES</span></span>
<span class="line"><span style="color:#E1E4E8;">  (</span><span style="color:#9ECBFF;">&#39;demo-acme&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;demo-acme.example.com&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">NOW</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> INTERVAL </span><span style="color:#79B8FF;">7</span><span style="color:#F97583;"> DAY</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- Database trigger cleans up expired data</span></span>
<span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#F97583;"> TRIGGER</span><span style="color:#B392F0;"> cleanup_expired</span></span>
<span class="line"><span style="color:#F97583;">AFTER</span><span style="color:#F97583;"> INSERT</span><span style="color:#F97583;"> OR</span><span style="color:#F97583;"> UPDATE</span><span style="color:#F97583;"> ON</span><span style="color:#E1E4E8;"> environments</span></span>
<span class="line"><span style="color:#F97583;">BEGIN</span></span>
<span class="line"><span style="color:#F97583;">  DELETE</span><span style="color:#F97583;"> FROM</span><span style="color:#E1E4E8;"> environments </span><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> ttl </span><span style="color:#F97583;">&lt;</span><span style="color:#F97583;"> NOW</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#F97583;">END</span><span style="color:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>When the data is deleted, infrastructure cleans up automatically. Perfect for demo environments or PR previews.</p></details><h2 id="practical-benefits-of-infrastructure-as-data" tabindex="-1">Practical Benefits of Infrastructure as Data <a class="header-anchor" href="#practical-benefits-of-infrastructure-as-data" aria-label="Permalink to &quot;Practical Benefits of Infrastructure as Data&quot;">‚Äã</a></h2><h3 id="for-development" tabindex="-1">For Development <a class="header-anchor" href="#for-development" aria-label="Permalink to &quot;For Development&quot;">‚Äã</a></h3><p>Before: Multiple tools (Git, Terraform, kubectl), multiple contexts, manual coordination</p><p>Now: One tool (SQL), one context (your database), automatic provisioning</p><p>Test changes by inserting test records. Same skills you use every day (writing queries, managing transactions) work for infrastructure too.</p><h3 id="for-operations" tabindex="-1">For Operations <a class="header-anchor" href="#for-operations" aria-label="Permalink to &quot;For Operations&quot;">‚Äã</a></h3><p>Before: Infrastructure state scattered (Git, Terraform state, Vault, etc.)</p><p>Now: Infrastructure state in one place (your database)</p><ul><li>Audit logs are database logs</li><li>Backups include infrastructure configuration</li><li>No state file reconciliation</li><li>Automatic drift correction (Lynq continuously syncs database to cluster)</li></ul><p>Rollbacks: Restore database ‚Üí Infrastructure recreates automatically</p><h3 id="for-business" tabindex="-1">For Business <a class="header-anchor" href="#for-business" aria-label="Permalink to &quot;For Business&quot;">‚Äã</a></h3><p>Before: Customer onboarding takes 15-45 minutes of manual coordination</p><p>Now: Customer onboarding is a database transaction (30 seconds)</p><p>Feature rollouts are database toggles. The gap between what your application knows and what your infrastructure provides disappears.</p><h2 id="when-infrastructure-as-data-makes-sense" tabindex="-1">When Infrastructure as Data Makes Sense <a class="header-anchor" href="#when-infrastructure-as-data-makes-sense" aria-label="Permalink to &quot;When Infrastructure as Data Makes Sense&quot;">‚Äã</a></h2><div class="tip custom-block"><p class="custom-block-title">‚úÖ Perfect For</p><ul><li><strong>Multi-tenant SaaS platforms</strong> - Each customer/tenant needs isolated infrastructure</li><li><strong>Data-driven applications</strong> - Infrastructure follows your data model</li><li><strong>Frequent provisioning</strong> - Multiple times per day</li><li><strong>Repeated patterns</strong> - Same stack per customer/project</li></ul></div><div class="warning custom-block"><p class="custom-block-title">‚ùå Better to Use Infrastructure as Code If</p><ul><li>You rarely provision infrastructure (once a month or less)</li><li>Infrastructure requires manual approval for every change</li><li>You need deep cloud provider integrations (use Terraform)</li><li>Infrastructure doesn&#39;t map to database records</li></ul></div><div class="info custom-block"><p class="custom-block-title">ü§ù Best: Combine Both</p><p>Use Infrastructure as Code for your cluster and cloud resources. Use Infrastructure as Data for customer/tenant infrastructure. They complement each other perfectly.</p></div><h2 id="considerations-for-infrastructure-as-data" tabindex="-1">Considerations for Infrastructure as Data <a class="header-anchor" href="#considerations-for-infrastructure-as-data" aria-label="Permalink to &quot;Considerations for Infrastructure as Data&quot;">‚Äã</a></h2><div class="warning custom-block"><p class="custom-block-title">Your Database Becomes Infrastructure Control Plane</p><p>With Infrastructure as Data, your database controls infrastructure. This means:</p><ul><li><strong>Database availability is critical</strong> - Though existing infrastructure keeps running if DB goes down</li><li><strong>Schema migrations affect infrastructure</strong> - Test carefully in staging</li><li><strong>Database permissions = Infrastructure permissions</strong> - Be thoughtful about access control</li></ul></div><div class="danger custom-block"><p class="custom-block-title">Security Model Shift</p><p>SQL injection becomes infrastructure injection. User input that manipulates queries could trigger unwanted infrastructure changes.</p><p>Always use parameterized queries. Validate all inputs. Protect database credentials; they control your cluster.</p></div><div class="info custom-block"><p class="custom-block-title">Sync Interval Trade-offs</p><p>Lynq syncs every 30 seconds by default. Small delay between data change and infrastructure provisioning. For most cases, this is fine. Tune as needed for your latency requirements.</p></div><h2 id="getting-started-with-infrastructure-as-data" tabindex="-1">Getting Started with Infrastructure as Data <a class="header-anchor" href="#getting-started-with-infrastructure-as-data" aria-label="Permalink to &quot;Getting Started with Infrastructure as Data&quot;">‚Äã</a></h2><p>Ready to try Infrastructure as Data with Lynq?</p><p><strong>1. Design your data schema as infrastructure API</strong></p><p>What database rows should represent infrastructure? Customers? Projects? Environments?</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">ALTER</span><span style="color:#F97583;"> TABLE</span><span style="color:#E1E4E8;"> customers</span></span>
<span class="line"><span style="color:#F97583;">  ADD</span><span style="color:#E1E4E8;"> COLUMN replicas </span><span style="color:#F97583;">INT</span><span style="color:#F97583;"> DEFAULT</span><span style="color:#79B8FF;"> 2</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#F97583;">  ADD</span><span style="color:#E1E4E8;"> COLUMN region </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">DEFAULT</span><span style="color:#9ECBFF;"> &#39;us-east-1&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#F97583;">  ADD</span><span style="color:#E1E4E8;"> COLUMN active </span><span style="color:#F97583;">BOOLEAN</span><span style="color:#F97583;"> DEFAULT</span><span style="color:#E1E4E8;"> TRUE;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Your schema IS your infrastructure API.</p><p><strong>2. Install Lynq and connect to your database</strong></p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">operator.lynq.sh/v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">LynqHub</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">  source</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">    type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">mysql</span></span>
<span class="line"><span style="color:#85E89D;">    mysql</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">      host</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">mysql.default.svc</span></span>
<span class="line"><span style="color:#85E89D;">      database</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">myapp</span></span>
<span class="line"><span style="color:#85E89D;">      table</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">customers</span></span>
<span class="line"><span style="color:#85E89D;">    syncInterval</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">30s</span></span>
<span class="line"><span style="color:#85E89D;">  valueMappings</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">    uid</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">customer_id</span></span>
<span class="line"><span style="color:#85E89D;">    activate</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">active</span></span>
<span class="line"><span style="color:#85E89D;">  extraValueMappings</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">    replicas</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">replicas</span></span>
<span class="line"><span style="color:#85E89D;">    plan</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">plan</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>3. Define your infrastructure template</strong></p><p>What should each record create? Namespace? Deployment? Services? Define once in a LynqForm.</p><p><strong>4. Test with data</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">INSERT INTO</span><span style="color:#E1E4E8;"> customers </span><span style="color:#F97583;">VALUES</span><span style="color:#E1E4E8;"> (</span><span style="color:#9ECBFF;">&#39;test&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;test.example.com&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;pro&#39;</span><span style="color:#E1E4E8;">, true, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Watch infrastructure provision. If something&#39;s wrong, delete the row and try again. It&#39;s just data.</p><h2 id="closing-thoughts" tabindex="-1">Closing Thoughts <a class="header-anchor" href="#closing-thoughts" aria-label="Permalink to &quot;Closing Thoughts&quot;">‚Äã</a></h2><p>Infrastructure as Data isn&#39;t about replacing every tool you use. It&#39;s about recognizing when your infrastructure naturally maps to your data and eliminating the artificial gap between them.</p><p><strong>Infrastructure as Code</strong> is powerful for cloud resources and cluster setup. <strong>Infrastructure as Data</strong> is powerful for per-customer stacks and data-driven applications.</p><p><strong>RecordOps</strong> is how you practice Infrastructure as Data. <strong>Lynq</strong> is an open-source platform that implements it for Kubernetes.</p><p>If your infrastructure follows your data model, maybe it&#39;s time to let your data drive your infrastructure directly.</p><h2 id="learn-more" tabindex="-1">Learn More <a class="header-anchor" href="#learn-more" aria-label="Permalink to &quot;Learn More&quot;">‚Äã</a></h2><ul><li><a href="./how-it-works.html">How Lynq Works</a> - RecordOps architecture</li><li><a href="./quickstart.html">Quick Start</a> - Try Infrastructure as Data in 5 minutes</li><li><a href="./architecture.html">Architecture</a> - Lynq system design</li><li><a href="./advanced-use-cases.html">Use Cases</a> - Real-world patterns</li></ul><hr><p>Questions? Open an issue on <a href="https://github.com/k8s-lynq/lynq/issues" target="_blank" rel="noreferrer">GitHub</a> or start a <a href="https://github.com/k8s-lynq/lynq/discussions" target="_blank" rel="noreferrer">discussion</a>.</p>`,109)])])}const m=a(r,[["render",l]]);export{y as __pageData,m as default};
