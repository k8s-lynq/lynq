import{_ as b,r as o,c as m,o as t,a,b as c,f as s,e as l,w as p,d as e,S as i}from"./chunks/plugin-vue_export-helper.BFoZFeGM.js";const q=JSON.parse('{"title":"Policies Guide","description":"","frontmatter":{},"headers":[],"relativePath":"policies.md","filePath":"policies.md","lastUpdated":1767596577000}'),F={name:"policies.md"};function E(h,n,g,C,B,f){const r=o("Mermaid"),d=o("CreationPolicyVisualizer"),u=o("DeletionPolicyVisualizer"),y=o("ConflictPolicyVisualizer");return t(),m("div",null,[n[2]||(n[2]=a("",7)),(t(),c(i,null,{default:p(()=>[l(r,{id:"mermaid-98",class:"mermaid my-class",graph:"flowchart%20TD%0A%20%20%20%20Start(%5BLynqForm%5D)%0A%20%20%20%20Creation%7B%7BCreationPolicy%7D%7D%0A%20%20%20%20Deletion%7B%7BDeletionPolicy%7D%7D%0A%20%20%20%20Conflict%7B%7BConflictPolicy%7D%7D%0A%20%20%20%20Patch%7B%7BPatchStrategy%7D%7D%0A%20%20%20%20Runtime%5B(Cluster%20Resources)%5D%0A%0A%20%20%20%20Start%20--%3E%20Creation%20--%3E%20Conflict%20--%3E%20Patch%20--%3E%20Runtime%0A%20%20%20%20Creation%20-.-%3E%7COnce%7C%20Runtime%0A%20%20%20%20Creation%20-.-%3E%7CWhenNeeded%7C%20Runtime%0A%0A%20%20%20%20Start%20--%3E%20Deletion%20--%3E%20Runtime%0A%20%20%20%20Deletion%20-.-%3E%7CDelete%7C%20Runtime%0A%20%20%20%20Deletion%20-.-%3E%7CRetain%7C%20Runtime%0A%0A%20%20%20%20Conflict%20-.-%3E%7C%22Stuck%20%E2%86%92%20Alert%22%7C%20Runtime%0A%20%20%20%20Conflict%20-.-%3E%7C%22Force%20%E2%86%92%20SSA%20force%20apply%22%7C%20Runtime%0A%0A%20%20%20%20Patch%20-.-%3E%7Capply%7C%20Runtime%0A%20%20%20%20Patch%20-.-%3E%7Cmerge%7C%20Runtime%0A%20%20%20%20Patch%20-.-%3E%7Creplace%7C%20Runtime%0A%0A%20%20%20%20classDef%20decision%20fill%3A%23fff3e0%2Cstroke%3A%23ffb74d%2Cstroke-width%3A2px%3B%0A%20%20%20%20classDef%20runtime%20fill%3A%23e3f2fd%2Cstroke%3A%2364b5f6%2Cstroke-width%3A2px%3B%0A%20%20%20%20class%20Creation%2CDeletion%2CConflict%2CPatch%20decision%3B%0A%20%20%20%20class%20Runtime%20runtime%3B%0A"})]),fallback:p(()=>[...n[0]||(n[0]=[e(" Loading... ",-1)])]),_:1})),n[3]||(n[3]=s("h2",{id:"creationpolicy",tabindex:"-1"},[e("CreationPolicy "),s("a",{class:"header-anchor",href:"#creationpolicy","aria-label":'Permalink to "CreationPolicy"'},"​")],-1)),n[4]||(n[4]=s("p",null,"Controls when a resource is created or re-applied.",-1)),l(d),n[5]||(n[5]=a("",21)),l(u),n[6]||(n[6]=a("",36)),(t(),c(i,null,{default:p(()=>[l(r,{id:"mermaid-456",class:"mermaid my-class",graph:"flowchart%20TB%0A%20%20%20%20Hub%5BLynqHub%3Cbr%2F%3Edeleted%5D%20--%3E%20Nodes%5BLynqNode%20CRs%3Cbr%2F%3Efinalizers%20trigger%5D%0A%20%20%20%20Nodes%20--%3E%20Resources%5B%22Node%20Resources%3Cbr%2F%3E(Deployments%2C%20PVCs%2C%20...)%22%5D%0A%20%20%20%20style%20Hub%20fill%3A%23ffebee%2Cstroke%3A%23ef5350%2Cstroke-width%3A2px%3B%0A%20%20%20%20style%20Nodes%20fill%3A%23fff3e0%2Cstroke%3A%23ffb74d%2Cstroke-width%3A2px%3B%0A%20%20%20%20style%20Resources%20fill%3A%23f3e5f5%2Cstroke%3A%23ba68c8%2Cstroke-width%3A2px%3B%0A"})]),fallback:p(()=>[...n[1]||(n[1]=[e(" Loading... ",-1)])]),_:1})),n[7]||(n[7]=a("",17)),l(y),n[8]||(n[8]=a("",89)),n[9]||(n[9]=s("div",null,[s("div",{class:"language-bash line-numbers-mode"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki github-dark vp-code",tabindex:"0","v-pre":""},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"$"),s("span",{style:{color:"#9ECBFF"}}," kubectl"),s("span",{style:{color:"#9ECBFF"}}," get"),s("span",{style:{color:"#9ECBFF"}}," lynqnode"),s("span",{style:{color:"#9ECBFF"}}," acme-customer-web-app"),s("span",{style:{color:"#79B8FF"}}," -n"),s("span",{style:{color:"#9ECBFF"}}," lynq-system")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"NAME"),s("span",{style:{color:"#9ECBFF"}},"                        READY"),s("span",{style:{color:"#9ECBFF"}},"   DESIRED"),s("span",{style:{color:"#9ECBFF"}},"   FAILED"),s("span",{style:{color:"#9ECBFF"}},"   DEGRADED"),s("span",{style:{color:"#9ECBFF"}},"   AGE")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"acme-customer-web-app"),s("span",{style:{color:"#9ECBFF"}},"       2/3"),s("span",{style:{color:"#79B8FF"}},"     3"),s("span",{style:{color:"#79B8FF"}},"         0"),s("span",{style:{color:"#79B8FF"}},"        true"),s("span",{style:{color:"#9ECBFF"}},"       10m")])])]),s("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br")])]),s("p",null,[s("strong",null,"Step 1: Identify the conflicted resource")]),s("div",{class:"language-bash line-numbers-mode"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki github-dark vp-code",tabindex:"0","v-pre":""},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"# Check LynqNode status for conflict details")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"$"),s("span",{style:{color:"#9ECBFF"}}," kubectl"),s("span",{style:{color:"#9ECBFF"}}," get"),s("span",{style:{color:"#9ECBFF"}}," lynqnode"),s("span",{style:{color:"#9ECBFF"}}," acme-customer-web-app"),s("span",{style:{color:"#79B8FF"}}," -n"),s("span",{style:{color:"#9ECBFF"}}," lynq-system"),s("span",{style:{color:"#79B8FF"}}," \\")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#79B8FF"}},"    -o"),s("span",{style:{color:"#9ECBFF"}},` jsonpath='{.status.conditions[?(@.type=="Degraded")].message}'`)]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"Deployment"),s("span",{style:{color:"#9ECBFF"}}," default/acme-app"),s("span",{style:{color:"#9ECBFF"}}," managed"),s("span",{style:{color:"#9ECBFF"}}," by"),s("span",{style:{color:"#9ECBFF"}}," 'helm',"),s("span",{style:{color:"#9ECBFF"}}," not"),s("span",{style:{color:"#9ECBFF"}}," 'lynq'")])])]),s("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br")])]),s("p",null,[s("strong",null,"Step 2: Investigate who owns the resource")]),s("div",{class:"language-bash line-numbers-mode"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki github-dark vp-code",tabindex:"0","v-pre":""},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"# Check the field manager (owner)")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"$"),s("span",{style:{color:"#9ECBFF"}}," kubectl"),s("span",{style:{color:"#9ECBFF"}}," get"),s("span",{style:{color:"#9ECBFF"}}," deployment"),s("span",{style:{color:"#9ECBFF"}}," acme-app"),s("span",{style:{color:"#79B8FF"}}," -o"),s("span",{style:{color:"#9ECBFF"}}," yaml"),s("span",{style:{color:"#F97583"}}," |"),s("span",{style:{color:"#B392F0"}}," grep"),s("span",{style:{color:"#79B8FF"}}," -A10"),s("span",{style:{color:"#9ECBFF"}}," managedFields")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"  managedFields:")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"  -"),s("span",{style:{color:"#9ECBFF"}}," apiVersion:"),s("span",{style:{color:"#9ECBFF"}}," apps/v1")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"    fieldsType:"),s("span",{style:{color:"#9ECBFF"}}," FieldsV1")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"    manager:"),s("span",{style:{color:"#9ECBFF"}}," helm"),s("span",{style:{color:"#6A737D"}},"              # ← Owned by Helm!")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"    operation:"),s("span",{style:{color:"#9ECBFF"}}," Apply")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    time: "),s("span",{style:{color:"#9ECBFF"}},'"2025-01-10T08:00:00Z"')])])]),s("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br")])]),s("p",null,[s("strong",null,"Step 3: Choose your resolution strategy")]),s("table",{tabindex:"0"},[s("thead",null,[s("tr",null,[s("th",null,"Strategy"),s("th",null,"When to Use"),s("th",null,"Command")])]),s("tbody",null,[s("tr",null,[s("td",null,"Delete conflicting resource"),s("td",null,"Resource should be managed by Lynq"),s("td",null,[s("code",null,"kubectl delete deployment acme-app")])]),s("tr",null,[s("td",null,"Change to Force policy"),s("td",null,"Lynq should take ownership"),s("td",null,[e("Edit LynqForm: "),s("code",null,"conflictPolicy: Force")])]),s("tr",null,[s("td",null,"Use unique name"),s("td",null,"Keep both resources"),s("td",null,[e("Change "),s("code",null,'nameTemplate: "{{ .uid }}-app-v2"')])]),s("tr",null,[s("td",null,"Remove from Lynq"),s("td",null,"Keep existing, don't manage"),s("td",null,"Remove resource from LynqForm")])])]),s("p",null,[s("strong",null,"Step 4: Verify resolution")]),s("div",{class:"language-bash line-numbers-mode"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki github-dark vp-code",tabindex:"0","v-pre":""},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"# After choosing a strategy, trigger reconciliation")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"$"),s("span",{style:{color:"#9ECBFF"}}," kubectl"),s("span",{style:{color:"#9ECBFF"}}," annotate"),s("span",{style:{color:"#9ECBFF"}}," lynqnode"),s("span",{style:{color:"#9ECBFF"}}," acme-customer-web-app"),s("span",{style:{color:"#79B8FF"}}," -n"),s("span",{style:{color:"#9ECBFF"}}," lynq-system"),s("span",{style:{color:"#79B8FF"}}," \\")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9ECBFF"}},"    lynq.sh/force-reconcile="),s("span",{style:{color:"#E1E4E8"}},"$("),s("span",{style:{color:"#B392F0"}},"date"),s("span",{style:{color:"#9ECBFF"}}," +%s"),s("span",{style:{color:"#E1E4E8"}},") "),s("span",{style:{color:"#79B8FF"}},"--overwrite")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"# Verify degraded status is cleared")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"$"),s("span",{style:{color:"#9ECBFF"}}," kubectl"),s("span",{style:{color:"#9ECBFF"}}," get"),s("span",{style:{color:"#9ECBFF"}}," lynqnode"),s("span",{style:{color:"#9ECBFF"}}," acme-customer-web-app"),s("span",{style:{color:"#79B8FF"}}," -n"),s("span",{style:{color:"#9ECBFF"}}," lynq-system")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"NAME"),s("span",{style:{color:"#9ECBFF"}},"                        READY"),s("span",{style:{color:"#9ECBFF"}},"   DESIRED"),s("span",{style:{color:"#9ECBFF"}},"   FAILED"),s("span",{style:{color:"#9ECBFF"}},"   DEGRADED"),s("span",{style:{color:"#9ECBFF"}},"   AGE")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"acme-customer-web-app"),s("span",{style:{color:"#9ECBFF"}},"       3/3"),s("span",{style:{color:"#79B8FF"}},"     3"),s("span",{style:{color:"#79B8FF"}},"         0"),s("span",{style:{color:"#79B8FF"}},"        false"),s("span",{style:{color:"#9ECBFF"}},"      12m")])])]),s("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br")])])],-1)),n[10]||(n[10]=a("",64))])}const D=b(F,[["render",E]]);export{q as __pageData,D as default};
