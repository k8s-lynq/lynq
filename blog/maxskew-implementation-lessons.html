<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Implementing maxSkew: How to Safely Update Nodes at Scale | Lynq</title>
    
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.B21PnBkI.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.DCnkRH6r.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.ZsQ6jjYb.js">
    <link rel="modulepreload" href="/assets/chunks/theme.uKb44x__.js">
    <link rel="modulepreload" href="/assets/chunks/katex.BbEIqZs1.js">
    <link rel="modulepreload" href="/assets/chunks/dagre-6UL2VRFP.BY-4vdnR.js">
    <link rel="modulepreload" href="/assets/chunks/cose-bilkent-S5V4N54A.C1w4EjFa.js">
    <link rel="modulepreload" href="/assets/chunks/c4Diagram-YG6GDRKO.14Y_Xf13.js">
    <link rel="modulepreload" href="/assets/chunks/flowDiagram-NV44I4VS.Dp7Kqba6.js">
    <link rel="modulepreload" href="/assets/chunks/erDiagram-Q2GNP2WA.Ca3iMy0p.js">
    <link rel="modulepreload" href="/assets/chunks/gitGraphDiagram-NY62KEGX.CNDavDNR.js">
    <link rel="modulepreload" href="/assets/chunks/ganttDiagram-LVOFAZNH.EqJDBVYW.js">
    <link rel="modulepreload" href="/assets/chunks/infoDiagram-ER5ION4S.C7qIwzpS.js">
    <link rel="modulepreload" href="/assets/chunks/pieDiagram-ADFJNKIX.COixh8_5.js">
    <link rel="modulepreload" href="/assets/chunks/quadrantDiagram-AYHSOK5B.B1ncIMr3.js">
    <link rel="modulepreload" href="/assets/chunks/xychartDiagram-PRI3JC2R.xgDWRrdK.js">
    <link rel="modulepreload" href="/assets/chunks/requirementDiagram-UZGBJVZJ.EHDjv7es.js">
    <link rel="modulepreload" href="/assets/chunks/sequenceDiagram-WL72ISMW.CQTZcUna.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-2ON5EDUG.Cw9y7IN6.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-v2-WZHVMYZB.Cw9y7IN6.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-FKZM4ZOC.CSJhQPry.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-v2-4FDKWEC3.DrppzFVz.js">
    <link rel="modulepreload" href="/assets/chunks/journeyDiagram-XKPGCS4Q.BOODzEUw.js">
    <link rel="modulepreload" href="/assets/chunks/timeline-definition-IT6M3QCI.BJI85NG6.js">
    <link rel="modulepreload" href="/assets/chunks/mindmap-definition-VGOIOE7T.CatsIEde.js">
    <link rel="modulepreload" href="/assets/chunks/kanban-definition-3W4ZIXB7.CtFvbMwl.js">
    <link rel="modulepreload" href="/assets/chunks/sankeyDiagram-TZEHDZUN.DoPlKjoS.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-S2PKOQOG.D0_5DkFc.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-QEK2KX5R.DBWCEK_w.js">
    <link rel="modulepreload" href="/assets/chunks/blockDiagram-VD42YOAC.C18iys1f.js">
    <link rel="modulepreload" href="/assets/chunks/architectureDiagram-VXUJARFQ.BVv3865w.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-PSM6KHXK.CQ3XnQWo.js">
    <link rel="modulepreload" href="/assets/chunks/virtual_mermaid-config.DDnGl6nM.js">
    <link rel="modulepreload" href="/assets/blog_maxskew-implementation-lessons.md.Ck9fr7Bx.lean.js">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/android-chrome-512x512.png">
    <link rel="manifest" href="/site.webmanifest">
    <meta name="theme-color" content="#1a1a1a">
    <meta name="description" content="Lynq is a RecordOps platform that implements Infrastructure as Data for Kubernetes. Transform database records into production-ready infrastructure automatically. No YAML, no CI/CD delaysâ€”just data.">
    <meta name="keywords" content="kubernetes, operator, automation, database-driven, k8s, lynq, multi-tenancy, resource provisioning, recordops, infrastructure as data, infrastructure as code alternative, data-driven infrastructure">
    <meta name="author" content="Lynq Contributors">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Lynq">
    <meta property="og:title" content="Lynq - Infrastructure as Data for Kubernetes">
    <meta property="og:description" content="A RecordOps platform that implements Infrastructure as Data for Kubernetes. Turn database records into infrastructure. No YAML files, no CI/CD delaysâ€”just data.">
    <meta property="og:url" content="https://lynq.sh">
    <meta property="og:image" content="https://lynq.sh/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Lynq Logo">
    <meta property="og:locale" content="en_US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Lynq - Infrastructure as Data for Kubernetes">
    <meta name="twitter:description" content="A RecordOps platform that implements Infrastructure as Data for Kubernetes. Turn database records into infrastructure. No YAML, no CI/CD delaysâ€”just data.">
    <meta name="twitter:image" content="https://lynq.sh/og-image.png">
    <meta name="twitter:image:alt" content="Lynq Logo">
    <meta name="google-site-verification" content="g7LPr3Wcm6hCm-Lm8iP5KVl11KvPv6Chxpjh3oNKHPw">
    <link rel="alternate" type="application/rss+xml" title="Lynq Blog RSS Feed" href="https://lynq.sh/feed.xml">
    <script id="check-dark-mode">document.documentElement.classList.add("dark");</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle" data-v-9fd4d1dd data-v-9f43907a><a class="title" href="/" data-v-9f43907a><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-ab19afbb><!--]--><span data-v-9f43907a>Lynq</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/quickstart.html" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Docs</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Blog</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-afb2845e data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-bfe7971f><span class="text" data-v-bfe7971f><!----><span data-v-bfe7971f>Links</span><span class="vpi-chevron-down text-icon" data-v-bfe7971f></span></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><div class="items" data-v-20ed86d6><!--[--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link vp-external-link-icon" href="https://github.com/k8s-lynq/lynq" target="_blank" rel="noreferrer" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>GitHub</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/feed.xml" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>RSS Feed</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><!----><!----><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--]--></div></div></div><!--[--><!--[--><!--[--><a href="https://github.com/k8s-lynq/lynq" target="_blank" rel="noopener noreferrer" class="github-star-badge" aria-label="Star k8s-lynq/lynq on GitHub" data-v-188af477><img src="https://img.shields.io/github/stars/k8s-lynq/lynq?style=social" alt="GitHub stars" class="badge-img" data-v-188af477></a><!--]--><!--]--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-6b867909><button data-v-6b867909>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _blog_maxskew-implementation-lessons" data-v-e6f2a212><div><h1 id="implementing-maxskew-how-to-safely-update-nodes-at-scale" tabindex="-1">Implementing maxSkew: How to Safely Update Nodes at Scale <a class="header-anchor" href="#implementing-maxskew-how-to-safely-update-nodes-at-scale" aria-label="Permalink to &quot;Implementing maxSkew: How to Safely Update Nodes at Scale&quot;">â€‹</a></h1><div class="blog-post-meta" data-v-e77e5350><div class="meta-info" data-v-e77e5350><span class="date" data-v-e77e5350>December 18, 2025</span><span class="separator" data-v-e77e5350>Â·</span><span class="author" data-v-e77e5350>Tim Kang</span></div><div class="tags" data-v-e77e5350><!--[--><span class="tag" data-v-e77e5350>Kubernetes</span><span class="tag" data-v-e77e5350>Operator</span><span class="tag" data-v-e77e5350>Rolling Update</span><span class="tag" data-v-e77e5350>maxSkew</span><!--]--></div></div><p>One of the most challenging aspects of developing a Kubernetes Operator was handling large-scale rolling updates. What happens when modifying a single template triggers updates across hundreds of nodes simultaneously? This post shares the lessons learned from implementing Lynq Operator&#39;s <code>maxSkew</code> feature.</p><h2 id="the-problem-blast-radius" tabindex="-1">The Problem: Blast Radius <a class="header-anchor" href="#the-problem-blast-radius" aria-label="Permalink to &quot;The Problem: Blast Radius&quot;">â€‹</a></h2><p>In the RecordOps pattern, a single LynqForm (template) applies to hundreds or thousands of LynqNodes. When you modify the template, all node Deployments must be updated.</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># What if this single template applies to hundreds of nodes?</span></span>
<span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">lynq.sh/v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">LynqForm</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">  deployments</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">id</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">app</span></span>
<span class="line"><span style="color:#85E89D;">      spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">        template</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">          spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">            containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">              - </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">app:v2</span><span style="color:#6A737D;">  # Changed from v1 to v2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>What if <code>app:v2</code> has a bug? All Pods would simultaneously enter CrashLoopBackOff. The entire cluster would be paralyzed.</p><p>Even without bugs, updating all nodes at once creates serious problems:</p><ul><li><strong>Image pull storm</strong>: Hundreds of nodes pulling the same container image simultaneously saturates network bandwidth and can overload the container registry</li><li><strong>Resource contention</strong>: Old and new Pods running concurrently during rollout doubles CPU and memory consumption, potentially triggering OOM kills</li><li><strong>API server overload</strong>: Massive concurrent updates flood the Kubernetes API server with requests, slowing down the entire cluster</li><li><strong>Cascading failures</strong>: If new Pods fail readiness probes, traffic still routes to terminating old Pods, causing request failures across all services</li></ul><p>And if there&#39;s a bug in the new version, you have no time to react. By the time you notice something is wrong, every single node is already affected.</p><div class="blast-radius-animation" data-v-82368ec8><div class="animation-header" data-v-82368ec8><span class="header-icon" data-v-82368ec8>ðŸ’¥</span><span class="header-title" data-v-82368ec8>Blast Radius: Template Update Impact</span></div><div class="animation-content" data-v-82368ec8><div class="template-section" data-v-82368ec8><div class="template-card" data-v-82368ec8><div class="template-label" data-v-82368ec8>LynqForm Template</div><div class="template-change" data-v-82368ec8><code class="old-value" data-v-82368ec8>image: app:v1</code><!----><!----></div></div><div class="propagation-arrow" data-v-82368ec8><span data-v-82368ec8>â–¼</span><span class="propagation-label" data-v-82368ec8>Applies to all nodes</span></div></div><div class="nodes-section" data-v-82368ec8><div class="nodes-header" data-v-82368ec8><span class="nodes-count" data-v-82368ec8>24 Nodes</span><span class="healthy nodes-status" data-v-82368ec8>All healthy</span></div><div class="nodes-grid" data-v-82368ec8><!--[--><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><div class="healthy node" data-v-82368ec8><div class="node-inner" data-v-82368ec8><span class="node-icon" data-v-82368ec8>âœ“</span></div></div><!--]--></div></div><div class="metrics-section" data-v-82368ec8><div class="metric danger" data-v-82368ec8><span class="metric-value" data-v-82368ec8>0</span><span class="metric-label" data-v-82368ec8>CrashLoopBackOff</span></div><div class="metric warning" data-v-82368ec8><span class="metric-value" data-v-82368ec8>0</span><span class="metric-label" data-v-82368ec8>Updating</span></div><div class="metric success" data-v-82368ec8><span class="metric-value" data-v-82368ec8>24</span><span class="metric-label" data-v-82368ec8>Healthy</span></div></div><div class="warning-message" data-v-82368ec8><span class="warning-icon" data-v-82368ec8>ðŸš¨</span><span class="warning-text" data-v-82368ec8>Cluster paralyzed! All services affected.</span></div></div><div class="restart-hint" data-v-82368ec8> Restarting demo... </div></div><h2 id="the-solution-maxskew" tabindex="-1">The Solution: maxSkew <a class="header-anchor" href="#the-solution-maxskew" aria-label="Permalink to &quot;The Solution: maxSkew&quot;">â€‹</a></h2><p>Just as Kubernetes Deployments use <code>maxSurge</code> and <code>maxUnavailable</code> to control rolling updates, Lynq uses <code>maxSkew</code> to limit the number of nodes updating concurrently.</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">lynq.sh/v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">LynqHub</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">  rollout</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">    maxSkew</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">10</span><span style="color:#6A737D;">  # Update at most 10 nodes simultaneously</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>The implementation logic is simple: only start the next node update when the current updating node count is below maxSkew. This is essentially a sliding window approach.</p><div class="tip custom-block"><p class="custom-block-title">Feedback Welcome</p><p>Currently, Lynq only supports this sliding window rollout strategy. Whether we need other strategies (like canary or blue-green) is still an open question. If you have thoughts or use cases that would benefit from different rollout approaches, please share them on <a href="https://github.com/k8s-lynq/lynq/issues" target="_blank" rel="noreferrer">GitHub Issues</a>.</p></div><h2 id="first-implementation-status-based-counting" tabindex="-1">First Implementation: Status-Based Counting <a class="header-anchor" href="#first-implementation-status-based-counting" aria-label="Permalink to &quot;First Implementation: Status-Based Counting&quot;">â€‹</a></h2><p>The most intuitive approach is to check each LynqNode&#39;s Status.</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">func</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">r </span><span style="color:#F97583;">*</span><span style="color:#B392F0;">LynqHubReconciler</span><span style="color:#E1E4E8;">) </span><span style="color:#B392F0;">countUpdatingNodes</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">nodes</span><span style="color:#E1E4E8;"> []</span><span style="color:#B392F0;">LynqNode</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    count </span><span style="color:#F97583;">:=</span><span style="color:#79B8FF;"> 0</span></span>
<span class="line"><span style="color:#F97583;">    for</span><span style="color:#E1E4E8;"> _, node </span><span style="color:#F97583;">:=</span><span style="color:#F97583;"> range</span><span style="color:#E1E4E8;"> nodes {</span></span>
<span class="line"><span style="color:#F97583;">        if</span><span style="color:#F97583;"> !</span><span style="color:#E1E4E8;">meta.</span><span style="color:#B392F0;">IsStatusConditionTrue</span><span style="color:#E1E4E8;">(node.Status.Conditions, </span><span style="color:#9ECBFF;">&quot;Ready&quot;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">            count</span><span style="color:#F97583;">++</span><span style="color:#6A737D;">  // Not Ready means updating</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#F97583;">    return</span><span style="color:#E1E4E8;"> count</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>But this implementation had a critical flaw.</p><h2 id="discovering-the-problem-statusmanager-s-batch-processing" tabindex="-1">Discovering the Problem: StatusManager&#39;s Batch Processing <a class="header-anchor" href="#discovering-the-problem-statusmanager-s-batch-processing" aria-label="Permalink to &quot;Discovering the Problem: StatusManager&#39;s Batch Processing&quot;">â€‹</a></h2><p>During testing, we noticed strange behavior. Even with <code>maxSkew: 1</code>, occasionally 2-3 nodes would update simultaneously.</p><p>The cause was Lynq StatusManager&#39;s batch processing approach:</p><div class="mermaid my-class"></div><p>StatusManager batches Status updates for performance. When Node1&#39;s Reconcile starts and applies resources, but the Status hasn&#39;t been updated to <code>Ready=False</code> yet, the Hub controller calling <code>countUpdatingNodes</code> still sees Node1 as Ready.</p><h2 id="introducing-safety-margin" tabindex="-1">Introducing Safety Margin <a class="header-anchor" href="#introducing-safety-margin" aria-label="Permalink to &quot;Introducing Safety Margin&quot;">â€‹</a></h2><p>To solve this race condition, we introduced a time-based Safety Margin. We record the update start time in an Annotation, and regardless of Status, consider the node as &quot;updating&quot; for a certain period.</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> safetyMargin</span><span style="color:#F97583;"> =</span><span style="color:#79B8FF;"> 2</span><span style="color:#F97583;"> *</span><span style="color:#E1E4E8;"> time.Second</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">func</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">r </span><span style="color:#F97583;">*</span><span style="color:#B392F0;">LynqHubReconciler</span><span style="color:#E1E4E8;">) </span><span style="color:#B392F0;">countUpdatingNodes</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">nodes</span><span style="color:#E1E4E8;"> []</span><span style="color:#B392F0;">LynqNode</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    count </span><span style="color:#F97583;">:=</span><span style="color:#79B8FF;"> 0</span></span>
<span class="line"><span style="color:#F97583;">    for</span><span style="color:#E1E4E8;"> _, node </span><span style="color:#F97583;">:=</span><span style="color:#F97583;"> range</span><span style="color:#E1E4E8;"> nodes {</span></span>
<span class="line"><span style="color:#6A737D;">        // Safety Margin: Handle async Status update delay</span></span>
<span class="line"><span style="color:#E1E4E8;">        startTime </span><span style="color:#F97583;">:=</span><span style="color:#E1E4E8;"> node.Annotations[</span><span style="color:#9ECBFF;">&quot;rollout-update-start-time&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#F97583;">        if</span><span style="color:#E1E4E8;"> time.</span><span style="color:#B392F0;">Since</span><span style="color:#E1E4E8;">(startTime) </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> safetyMargin {</span></span>
<span class="line"><span style="color:#E1E4E8;">            count</span><span style="color:#F97583;">++</span></span>
<span class="line"><span style="color:#F97583;">            continue</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">        // Check Status</span></span>
<span class="line"><span style="color:#F97583;">        if</span><span style="color:#F97583;"> !</span><span style="color:#E1E4E8;">meta.</span><span style="color:#B392F0;">IsStatusConditionTrue</span><span style="color:#E1E4E8;">(node.Status.Conditions, </span><span style="color:#9ECBFF;">&quot;Ready&quot;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">            count</span><span style="color:#F97583;">++</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#F97583;">    return</span><span style="color:#E1E4E8;"> count</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>We set it to 2 seconds considering StatusManager&#39;s batch flush interval (up to 1 second) plus buffer. Now when a node starts updating, it&#39;s counted as updating for at least 2 seconds.</p><h2 id="second-problem-the-definition-of-ready" tabindex="-1">Second Problem: The Definition of &quot;Ready&quot; <a class="header-anchor" href="#second-problem-the-definition-of-ready" aria-label="Permalink to &quot;Second Problem: The Definition of &quot;Ready&quot;&quot;">â€‹</a></h2><p>Safety Margin solved the race condition, but E2E tests revealed another issue.</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#B392F0;">It</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;should wait for Pod readiness before updating next node&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">func</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#6A737D;">    // Deployment configured with initialDelaySeconds: 15</span></span>
<span class="line"><span style="color:#6A737D;">    // maxSkew: 1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    // Monitor after template update</span></span>
<span class="line"><span style="color:#6A737D;">    // Expected: Wait for Pod Ready before updating next node</span></span>
<span class="line"><span style="color:#6A737D;">    // Actual: Next node update starts as soon as LynqNode Status becomes Ready=True!</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>LynqNode&#39;s <code>Ready</code> condition indicates whether the resource Apply succeeded. But applying a Deployment doesn&#39;t mean the Pod is Ready.</p><div class="mermaid my-class"></div><p>The purpose of <code>maxSkew</code> is &quot;limiting the number of nodes updating simultaneously.&quot; But our implementation was &quot;limiting the number of nodes applying resources simultaneously.&quot; If the next node update starts before the Pod is actually Ready, the blast radius limitation becomes meaningless.</p><h2 id="solution-check-actual-resource-state" tabindex="-1">Solution: Check Actual Resource State <a class="header-anchor" href="#solution-check-actual-resource-state" aria-label="Permalink to &quot;Solution: Check Actual Resource State&quot;">â€‹</a></h2><p>The solution is to directly check the actual Kubernetes resource state, not the LynqNode Status.</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">func</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">r </span><span style="color:#F97583;">*</span><span style="color:#B392F0;">LynqHubReconciler</span><span style="color:#E1E4E8;">) </span><span style="color:#B392F0;">isNodeResourcesActuallyReady</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">ctx</span><span style="color:#B392F0;"> context</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">Context</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">node</span><span style="color:#F97583;"> *</span><span style="color:#B392F0;">LynqNode</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">bool</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">    for</span><span style="color:#E1E4E8;"> _, resource </span><span style="color:#F97583;">:=</span><span style="color:#F97583;"> range</span><span style="color:#E1E4E8;"> node.Status.AppliedResources {</span></span>
<span class="line"><span style="color:#F97583;">        switch</span><span style="color:#E1E4E8;"> resource.Kind {</span></span>
<span class="line"><span style="color:#F97583;">        case</span><span style="color:#9ECBFF;"> &quot;Deployment&quot;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#F97583;">            var</span><span style="color:#E1E4E8;"> deploy </span><span style="color:#B392F0;">appsv1</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">Deployment</span></span>
<span class="line"><span style="color:#E1E4E8;">            r.Client.</span><span style="color:#B392F0;">Get</span><span style="color:#E1E4E8;">(ctx, resource.</span><span style="color:#B392F0;">NamespacedName</span><span style="color:#E1E4E8;">(), </span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;">deploy)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">            // Key: Check Progressing condition</span></span>
<span class="line"><span style="color:#E1E4E8;">            progressing </span><span style="color:#F97583;">:=</span><span style="color:#E1E4E8;"> meta.</span><span style="color:#B392F0;">FindStatusCondition</span><span style="color:#E1E4E8;">(deploy.Status.Conditions, </span><span style="color:#9ECBFF;">&quot;Progressing&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">            if</span><span style="color:#E1E4E8;"> progressing </span><span style="color:#F97583;">==</span><span style="color:#79B8FF;"> nil</span><span style="color:#F97583;"> ||</span><span style="color:#E1E4E8;"> progressing.Reason </span><span style="color:#F97583;">!=</span><span style="color:#9ECBFF;"> &quot;NewReplicaSetAvailable&quot;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">                return</span><span style="color:#79B8FF;"> false</span><span style="color:#6A737D;">  // Rollout still in progress</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">            // Check Available replicas</span></span>
<span class="line"><span style="color:#F97583;">            if</span><span style="color:#E1E4E8;"> deploy.Status.AvailableReplicas </span><span style="color:#F97583;">&lt;</span><span style="color:#F97583;"> *</span><span style="color:#E1E4E8;">deploy.Spec.Replicas {</span></span>
<span class="line"><span style="color:#F97583;">                return</span><span style="color:#79B8FF;"> false</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#F97583;">    return</span><span style="color:#79B8FF;"> true</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>The key insight is the Deployment&#39;s Progressing condition:</p><table tabindex="0"><thead><tr><th>Reason</th><th>Meaning</th></tr></thead><tbody><tr><td><code>ReplicaSetUpdated</code></td><td>Rollout in progress</td></tr><tr><td><code>NewReplicaSetAvailable</code></td><td>Rollout complete</td></tr><tr><td><code>ProgressDeadlineExceeded</code></td><td>Timeout (failed)</td></tr></tbody></table><p>Checking only <code>AvailableReplicas</code> isn&#39;t enough. Pods from the previous ReplicaSet might still be Running. Only when <code>Progressing.Reason == &quot;NewReplicaSetAvailable&quot;</code> is the new version fully deployed.</p><h2 id="final-implementation" tabindex="-1">Final Implementation <a class="header-anchor" href="#final-implementation" aria-label="Permalink to &quot;Final Implementation&quot;">â€‹</a></h2><p>The final implementation combines three conditions:</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">func</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">r </span><span style="color:#F97583;">*</span><span style="color:#B392F0;">LynqHubReconciler</span><span style="color:#E1E4E8;">) </span><span style="color:#B392F0;">countUpdatingNodes</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">ctx</span><span style="color:#B392F0;"> context</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">Context</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">nodes</span><span style="color:#E1E4E8;"> []</span><span style="color:#B392F0;">LynqNode</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    count </span><span style="color:#F97583;">:=</span><span style="color:#79B8FF;"> 0</span></span>
<span class="line"><span style="color:#F97583;">    for</span><span style="color:#E1E4E8;"> _, node </span><span style="color:#F97583;">:=</span><span style="color:#F97583;"> range</span><span style="color:#E1E4E8;"> nodes {</span></span>
<span class="line"><span style="color:#6A737D;">        // 1. Safety Margin (Handle async Status updates)</span></span>
<span class="line"><span style="color:#F97583;">        if</span><span style="color:#E1E4E8;"> time.</span><span style="color:#B392F0;">Since</span><span style="color:#E1E4E8;">(node.</span><span style="color:#B392F0;">UpdateStartTime</span><span style="color:#E1E4E8;">()) </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> safetyMargin {</span></span>
<span class="line"><span style="color:#E1E4E8;">            count</span><span style="color:#F97583;">++</span></span>
<span class="line"><span style="color:#F97583;">            continue</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">        // 2. Check LynqNode Status</span></span>
<span class="line"><span style="color:#F97583;">        if</span><span style="color:#F97583;"> !</span><span style="color:#E1E4E8;">meta.</span><span style="color:#B392F0;">IsStatusConditionTrue</span><span style="color:#E1E4E8;">(node.Status.Conditions, </span><span style="color:#9ECBFF;">&quot;Ready&quot;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">            count</span><span style="color:#F97583;">++</span></span>
<span class="line"><span style="color:#F97583;">            continue</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">        // 3. Check actual resource state (Key!)</span></span>
<span class="line"><span style="color:#F97583;">        if</span><span style="color:#F97583;"> !</span><span style="color:#E1E4E8;">r.</span><span style="color:#B392F0;">isNodeResourcesActuallyReady</span><span style="color:#E1E4E8;">(ctx, </span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;">node) {</span></span>
<span class="line"><span style="color:#E1E4E8;">            count</span><span style="color:#F97583;">++</span></span>
<span class="line"><span style="color:#F97583;">            continue</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#F97583;">    return</span><span style="color:#E1E4E8;"> count</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="lessons-learned" tabindex="-1">Lessons Learned <a class="header-anchor" href="#lessons-learned" aria-label="Permalink to &quot;Lessons Learned&quot;">â€‹</a></h2><h3 id="_1-recognize-asynchronous-characteristics-in-your-implementation" tabindex="-1">1. Recognize Asynchronous Characteristics in Your Implementation <a class="header-anchor" href="#_1-recognize-asynchronous-characteristics-in-your-implementation" aria-label="Permalink to &quot;1. Recognize Asynchronous Characteristics in Your Implementation&quot;">â€‹</a></h3><p>This problem wasn&#39;t a Kubernetes characteristic but a Lynq StatusManager design choice. The race condition arose from batching Status updates for performance. If Status were updated synchronously, this problem wouldn&#39;t exist. The time-based Safety Margin is a workaround, not a perfect solution. We need to keep exploring better approaches.</p><h3 id="_2-define-ready-clearly" tabindex="-1">2. Define &quot;Ready&quot; Clearly <a class="header-anchor" href="#_2-define-ready-clearly" aria-label="Permalink to &quot;2. Define &quot;Ready&quot; Clearly&quot;">â€‹</a></h3><p>LynqNode being Ready and Pod being Ready are different things. Clearly define what &quot;Ready&quot; means at each layer, and check the appropriate layer&#39;s state for your purpose.</p><h3 id="_3-find-the-source-of-truth" tabindex="-1">3. Find the Source of Truth <a class="header-anchor" href="#_3-find-the-source-of-truth" aria-label="Permalink to &quot;3. Find the Source of Truth&quot;">â€‹</a></h3><p>Sometimes you need to directly query the actual resources, not cached Status, events, or inferences. There&#39;s a performance cost, but it&#39;s essential for decisions where accuracy matters.</p><h3 id="_4-understand-deployment-status-conditions" tabindex="-1">4. Understand Deployment Status Conditions <a class="header-anchor" href="#_4-understand-deployment-status-conditions" aria-label="Permalink to &quot;4. Understand Deployment Status Conditions&quot;">â€‹</a></h3><p>To accurately determine rollout completion, check the <code>Progressing</code> condition:</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// Rollout completion check</span></span>
<span class="line"><span style="color:#E1E4E8;">conditions.Progressing.Reason </span><span style="color:#F97583;">==</span><span style="color:#9ECBFF;"> &quot;NewReplicaSetAvailable&quot;</span><span style="color:#E1E4E8;"> AND</span></span>
<span class="line"><span style="color:#E1E4E8;">status.AvailableReplicas </span><span style="color:#F97583;">&gt;=</span><span style="color:#E1E4E8;"> spec.Replicas AND</span></span>
<span class="line"><span style="color:#E1E4E8;">status.UpdatedReplicas </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> spec.Replicas</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_5-e2e-tests-are-essential" tabindex="-1">5. E2E Tests Are Essential <a class="header-anchor" href="#_5-e2e-tests-are-essential" aria-label="Permalink to &quot;5. E2E Tests Are Essential&quot;">â€‹</a></h3><p>Asynchronous behavior, timing issues, and multi-component interactions are hard to catch with unit tests. Some problems only surface when testing actual rollouts in a real Kubernetes cluster.</p><h2 id="remaining-challenge-custom-resource-ready-detection" tabindex="-1">Remaining Challenge: Custom Resource Ready Detection <a class="header-anchor" href="#remaining-challenge-custom-resource-ready-detection" aria-label="Permalink to &quot;Remaining Challenge: Custom Resource Ready Detection&quot;">â€‹</a></h2><p>Deployment, StatefulSet, and DaemonSet have standardized status fields provided by Kubernetes. But what about Custom Resources (CRs)?</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">lynq.sh/v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">LynqForm</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">  manifests</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">id</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">mysql-cluster</span></span>
<span class="line"><span style="color:#85E89D;">      spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">        apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">mysql.oracle.com/v2</span></span>
<span class="line"><span style="color:#85E89D;">        kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">InnoDBCluster</span></span>
<span class="line"><span style="color:#6A737D;">        # ...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Countless CRs exist: MySQL Operator&#39;s <code>InnoDBCluster</code>, Prometheus Operator&#39;s <code>ServiceMonitor</code>, Cert-Manager&#39;s <code>Certificate</code>, etc. The problem is there&#39;s no standardized Ready state for them. Each Operator provider decides their own status representation, making universal Ready detection impossible.</p><h3 id="problem-non-standardized-status-representation" tabindex="-1">Problem: Non-Standardized Status Representation <a class="header-anchor" href="#problem-non-standardized-status-representation" aria-label="Permalink to &quot;Problem: Non-Standardized Status Representation&quot;">â€‹</a></h3><p>CR status representation varies by Operator:</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># MySQL Operator - uses status.cluster.status</span></span>
<span class="line"><span style="color:#85E89D;">status</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">  cluster</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">    status</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">ONLINE</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># Cert-Manager - uses conditions but different type</span></span>
<span class="line"><span style="color:#85E89D;">status</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">  conditions</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Ready</span></span>
<span class="line"><span style="color:#85E89D;">      status</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;True&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># Some Operators - no status at all</span></span>
<span class="line"><span style="color:#85E89D;">status</span><span style="color:#E1E4E8;">: {}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Currently, Lynq treats CRs as &quot;Apply success = Ready&quot;. But this is risky. Applying an <code>InnoDBCluster</code> doesn&#39;t mean the MySQL cluster is actually Ready. Cluster setup can take several minutes.</p><h3 id="potential-solutions" tabindex="-1">Potential Solutions <a class="header-anchor" href="#potential-solutions" aria-label="Permalink to &quot;Potential Solutions&quot;">â€‹</a></h3><h4 id="_1-minimum-delay" tabindex="-1">1. Minimum Delay <a class="header-anchor" href="#_1-minimum-delay" aria-label="Permalink to &quot;1. Minimum Delay&quot;">â€‹</a></h4><p>The simplest approach is to enforce a minimum delay between node updates:</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">lynq.sh/v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">LynqHub</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">  rollout</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">    maxSkew</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">10</span></span>
<span class="line"><span style="color:#85E89D;">    minDelay</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">60s</span><span style="color:#6A737D;">  # Wait at least 60 seconds before next node update</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Even without knowing the exact Ready state, most resources stabilize after sufficient time. The advantage is simple implementation and applicability to all resource types.</p><p>The downside is clear: even resources that only need 10 seconds must wait 60 seconds. It&#39;s a trade-off between efficiency and safety.</p><h4 id="_2-custom-ready-probe" tabindex="-1">2. Custom Ready Probe <a class="header-anchor" href="#_2-custom-ready-probe" aria-label="Permalink to &quot;2. Custom Ready Probe&quot;">â€‹</a></h4><p>Let users define their own Ready detection logic:</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">lynq.sh/v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">LynqForm</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">  manifests</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">id</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">mysql-cluster</span></span>
<span class="line"><span style="color:#85E89D;">      spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">        apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">mysql.oracle.com/v2</span></span>
<span class="line"><span style="color:#85E89D;">        kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">InnoDBCluster</span></span>
<span class="line"><span style="color:#85E89D;">      readyProbe</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">        jsonPath</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;.status.cluster.status&quot;</span></span>
<span class="line"><span style="color:#85E89D;">        expectedValue</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;ONLINE&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Flexible, but users need to know each CR&#39;s status structure.</p><h4 id="_3-leverage-conditions-convention" tabindex="-1">3. Leverage Conditions Convention <a class="header-anchor" href="#_3-leverage-conditions-convention" aria-label="Permalink to &quot;3. Leverage Conditions Convention&quot;">â€‹</a></h4><p>Many CRs follow Kubernetes&#39; <a href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#typical-status-properties" target="_blank" rel="noreferrer">Conditions convention</a>:</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// Common logic to find type=Ready, status=True</span></span>
<span class="line"><span style="color:#F97583;">func</span><span style="color:#B392F0;"> isCustomResourceReady</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">cr</span><span style="color:#F97583;"> *</span><span style="color:#B392F0;">unstructured</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">Unstructured</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">bool</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    conditions, found, _ </span><span style="color:#F97583;">:=</span><span style="color:#E1E4E8;"> unstructured.</span><span style="color:#B392F0;">NestedSlice</span><span style="color:#E1E4E8;">(cr.Object, </span><span style="color:#9ECBFF;">&quot;status&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;conditions&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">    if</span><span style="color:#F97583;"> !</span><span style="color:#E1E4E8;">found {</span></span>
<span class="line"><span style="color:#F97583;">        return</span><span style="color:#79B8FF;"> false</span><span style="color:#6A737D;">  // Unknown without conditions</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#F97583;">    for</span><span style="color:#E1E4E8;"> _, c </span><span style="color:#F97583;">:=</span><span style="color:#F97583;"> range</span><span style="color:#E1E4E8;"> conditions {</span></span>
<span class="line"><span style="color:#F97583;">        if</span><span style="color:#E1E4E8;"> c[</span><span style="color:#9ECBFF;">&quot;type&quot;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">==</span><span style="color:#9ECBFF;"> &quot;Ready&quot;</span><span style="color:#F97583;"> &amp;&amp;</span><span style="color:#E1E4E8;"> c[</span><span style="color:#9ECBFF;">&quot;status&quot;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">==</span><span style="color:#9ECBFF;"> &quot;True&quot;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">            return</span><span style="color:#79B8FF;"> true</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#F97583;">    return</span><span style="color:#79B8FF;"> false</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>But not all CRs follow this convention.</p><h3 id="practical-approach-combined-strategy" tabindex="-1">Practical Approach: Combined Strategy <a class="header-anchor" href="#practical-approach-combined-strategy" aria-label="Permalink to &quot;Practical Approach: Combined Strategy&quot;">â€‹</a></h3><p>In practice, we&#39;ll likely need to combine multiple strategies:</p><ol><li>Default: Check Conditions convention (type=Ready)</li><li>Fallback: Time-based safety with minDelay</li><li>Override: User-defined readyProbe for custom logic</li></ol><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">  rollout</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">    maxSkew</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">10</span></span>
<span class="line"><span style="color:#85E89D;">    minDelay</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">30s</span><span style="color:#6A737D;">  # Fallback: Minimum wait when Ready detection fails</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>If you have good ideas for this problem, please share them on <a href="https://github.com/k8s-lynq/lynq/issues" target="_blank" rel="noreferrer">GitHub Issues</a>.</p><h2 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion" aria-label="Permalink to &quot;Conclusion&quot;">â€‹</a></h2><p>Implementing maxSkew seemed simple but hid unexpected complexity. To answer &quot;how many nodes are currently updating?&quot;, we had to dig deep into race conditions from StatusManager&#39;s batch processing, Deployment rollout states, and the multi-layered definition of Ready.</p><p>And there&#39;s still the unresolved challenge of Custom Resource Ready detection. Due to non-standardized status representations, there&#39;s no perfect solution, but a practical approach combining time-based safety measures and user-defined probes should be viable.</p><p>The most important lesson from this experience: <strong>Performance optimization (batch processing) creates new complexity (race conditions), and &quot;Ready&quot; is defined differently depending on context.</strong> Always keep these two things in mind.</p><hr><p>The <code>maxSkew</code> feature is available starting from <strong>Lynq v1.1.16</strong>. For more details, see the <a href="/configuration.html#rollout-configuration">rollout configuration documentation</a>.</p><div class="blog-post-footer" data-v-96bb2b6b><a href="/blog/" class="back-link" data-v-96bb2b6b><span class="arrow" data-v-96bb2b6b>â†</span><span data-v-96bb2b6b>Back to Blog</span></a></div></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><div class="edit-info" data-v-1bcd8184><!----><div class="last-updated" data-v-1bcd8184><p class="VPLastUpdated" data-v-1bcd8184 data-v-1bb0c8a8>Updated at: <time datetime="2025-12-18T02:40:59.000Z" data-v-1bb0c8a8></time></p></div></div><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter" data-v-d8b57b2d data-v-566314d4><div class="container" data-v-566314d4><p class="message" data-v-566314d4><p style="margin-bottom: 12px">Released under the Apache 2.0 License.<br />Built with â¤ï¸ using Kubebuilder, Controller-Runtime, and VitePress.</p></p><p class="copyright" data-v-566314d4>Copyright Â© 2025-2026 Lynq</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"about-lynq.md\":\"BUtokf2e\",\"advanced-use-cases.md\":\"DrRAGGbq\",\"alert-runbooks.md\":\"DrLThHp-\",\"api.md\":\"CgjvCY6I\",\"architecture.md\":\"Nqx6ikBN\",\"blog_ai-agent-era-infrastructure.md\":\"BBXac6DY\",\"blog_business-logic-in-infrastructure.md\":\"B6LI5DV2\",\"blog_index.md\":\"ATSNOd_a\",\"blog_introducing-lynq-dashboard.md\":\"CdROWqSd\",\"blog_managing-resource-lifecycle.md\":\"5q6jdBJ4\",\"blog_maxskew-implementation-lessons.md\":\"Ck9fr7Bx\",\"blog_why-i-built-lynq.md\":\"BNI1zSEQ\",\"configuration.md\":\"DL169y-A\",\"contributing-datasource.md\":\"BRoAEIwt\",\"dashboard.md\":\"YutMRhUM\",\"datasource.md\":\"CLRIiRNV\",\"dependencies.md\":\"BpEFeOct\",\"dependency-visualizer.md\":\"DFG7JgWG\",\"development.md\":\"Ba-lr_fb\",\"field-ignore.md\":\"DXf-prb7\",\"glossary.md\":\"CRd7owrG\",\"how-it-works.md\":\"C52IooLG\",\"index.md\":\"iB5z3e-e\",\"installation.md\":\"D-UGow88\",\"integration-argocd.md\":\"BHM0pKS5\",\"integration-crossplane.md\":\"fuGNhYix\",\"integration-external-dns.md\":\"M9d_Rw1I\",\"integration-flux.md\":\"DtkhKoM5\",\"local-development-minikube.md\":\"C999UYpW\",\"monitoring.md\":\"BX8fMnxB\",\"performance.md\":\"DK3n5Yqy\",\"policies-examples.md\":\"qT7ytN77\",\"policies.md\":\"BFOFQbuj\",\"prometheus-queries.md\":\"udnztZZf\",\"quickstart.md\":\"AT7Yto68\",\"recordops.md\":\"DMZU2KCY\",\"roadmap.md\":\"y4D2eUyZ\",\"security.md\":\"DhSA_5Ma\",\"template-builder.md\":\"DGg2PfrZ\",\"templates.md\":\"ClcJ94sA\",\"troubleshooting.md\":\"CBFLvMR2\",\"use-case-blue-green.md\":\"DXo2jlsz\",\"use-case-custom-domains.md\":\"BezBSQj6\",\"use-case-database-per-tenant.md\":\"BKQdbOSA\",\"use-case-feature-flags.md\":\"CQ4jCSB7\",\"use-case-multi-tier.md\":\"XEcHAl2c\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Lynq\",\"description\":\"Infrastructure as Data for Kubernetes - A RecordOps Platform\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":\"force-dark\",\"themeConfig\":{\"logo\":\"/logo.png\",\"nav\":[{\"text\":\"Docs\",\"link\":\"/quickstart\"},{\"text\":\"Blog\",\"link\":\"/blog/\"},{\"text\":\"Links\",\"items\":[{\"text\":\"GitHub\",\"link\":\"https://github.com/k8s-lynq/lynq\"},{\"text\":\"RSS Feed\",\"link\":\"/feed.xml\"}]}],\"sidebar\":[{\"text\":\"Getting Started\",\"collapsed\":false,\"items\":[{\"text\":\"About Lynq\",\"link\":\"/about-lynq\"},{\"text\":\"Installation\",\"link\":\"/installation\"},{\"text\":\"Quick Start\",\"link\":\"/quickstart\"},{\"text\":\"Dashboard\",\"link\":\"/dashboard\"}]},{\"text\":\"Core Concepts\",\"collapsed\":false,\"items\":[{\"text\":\"Infrastructure as Data\",\"link\":\"/recordops\"},{\"text\":\"How It Works\",\"link\":\"/how-it-works\"},{\"text\":\"Architecture\",\"link\":\"/architecture\"},{\"text\":\"API Reference\",\"link\":\"/api\"},{\"text\":\"Configuration\",\"link\":\"/configuration\"},{\"text\":\"Datasources\",\"link\":\"/datasource\"},{\"text\":\"Templates\",\"collapsed\":false,\"items\":[{\"text\":\"Overview\",\"link\":\"/templates\"},{\"text\":\"ðŸ› ï¸ Form Builder\",\"link\":\"/template-builder\"}]},{\"text\":\"Dependencies\",\"collapsed\":false,\"items\":[{\"text\":\"Overview\",\"link\":\"/dependencies\"},{\"text\":\"ðŸ” Visualizer\",\"link\":\"/dependency-visualizer\"}]},{\"text\":\"Policies\",\"collapsed\":false,\"items\":[{\"text\":\"Overview\",\"link\":\"/policies\"},{\"text\":\"Examples\",\"link\":\"/policies-examples\"},{\"text\":\"Field-Level Ignore\",\"link\":\"/field-ignore\"}]}]},{\"text\":\"Advanced Use Cases\",\"collapsed\":false,\"items\":[{\"text\":\"Overview\",\"link\":\"/advanced-use-cases\"},{\"text\":\"Custom Domains\",\"link\":\"/use-case-custom-domains\"},{\"text\":\"Multi-Tier Stack\",\"link\":\"/use-case-multi-tier\"},{\"text\":\"Blue-Green Deployments\",\"link\":\"/use-case-blue-green\"},{\"text\":\"Database-per-Tenant\",\"link\":\"/use-case-database-per-tenant\"},{\"text\":\"Feature Flags\",\"link\":\"/use-case-feature-flags\"}]},{\"text\":\"Operations\",\"collapsed\":false,\"items\":[{\"text\":\"Monitoring & Observability\",\"link\":\"/monitoring\"},{\"text\":\"Prometheus Queries\",\"link\":\"/prometheus-queries\"},{\"text\":\"Performance Tuning\",\"link\":\"/performance\"},{\"text\":\"Security\",\"link\":\"/security\"},{\"text\":\"Troubleshooting\",\"link\":\"/troubleshooting\"},{\"text\":\"Alert Runbooks\",\"link\":\"/alert-runbooks\"}]},{\"text\":\"Integrations\",\"collapsed\":false,\"items\":[{\"text\":\"Crossplane (Recommended)\",\"link\":\"/integration-crossplane\"},{\"text\":\"External DNS (Recommended)\",\"link\":\"/integration-external-dns\"},{\"text\":\"Flux\",\"link\":\"/integration-flux\"},{\"text\":\"Argo CD\",\"link\":\"/integration-argocd\"}]},{\"text\":\"Development\",\"collapsed\":false,\"items\":[{\"text\":\"Local Development\",\"link\":\"/local-development-minikube\"},{\"text\":\"Development Guide\",\"link\":\"/development\"},{\"text\":\"Contributing\",\"link\":\"/contributing-datasource\"},{\"text\":\"Roadmap\",\"link\":\"/roadmap\"}]},{\"text\":\"Glossary\",\"link\":\"/glossary\"}],\"search\":{\"provider\":\"local\"},\"footer\":{\"message\":\"<p style=\\\"margin-bottom: 12px\\\">Released under the Apache 2.0 License.<br />Built with â¤ï¸ using Kubebuilder, Controller-Runtime, and VitePress.</p>\",\"copyright\":\"Copyright Â© 2025-2026 Lynq\"},\"editLink\":{\"pattern\":\"https://github.com/k8s-lynq/lynq/edit/main/docs/:path\",\"text\":\"Edit this page on GitHub\"},\"lastUpdated\":{\"text\":\"Updated at\",\"formatOptions\":{\"dateStyle\":\"full\",\"timeStyle\":\"medium\"}}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>